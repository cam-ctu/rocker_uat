
R version 4.5.2 (2025-10-31) -- "[Not] Part in a Rumble"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> #! /usr/bin/env Rscript
> ## This runs testme test script inst/testme/test-value-error-cancels-set.R
> ## Don't edit - it was autogenerated by inst/testme/deploy.R
> future:::testme("value-error-cancels-set")
Test ‘value-error-cancels-set’ ...
 chr "none"

> library(future)
[09:48:29.346] Option 'future.startup.script': TRUE
[09:48:29.347] Future startup scripts considered: ‘.future.R’, ‘~/.future.R’
[09:48:29.347] Future startup scripts found: <none>

> options(future.debug = FALSE)

> strategies <- supportedStrategies()

> strategies <- setdiff(strategies, "sequential")

> for (strategy in strategies) {
+     message(sprintf("plan('%s') ...", strategy))
+     plan(strategy)
+     n0 <- nbrOfFreeWorkers()
+     message( .... [TRUNCATED] 
plan('multicore') ...
Number of free workers: 2
Create four futures, where one produces an error
[1] FALSE  TRUE  TRUE FALSE
Assert there is an error
<simpleError in eval(quote({    {        Sys.sleep(x/4)        if (x == 1) stop("boom")        x    }}), new.env()): boom>
Assert that all futures are resolved by value()
[1] TRUE TRUE TRUE TRUE
plan('multicore') .. done
plan('multisession') ...
Number of free workers: 2
Create four futures, where one produces an error
[1] FALSE  TRUE  TRUE FALSE
Assert there is an error
<simpleError in eval(quote({    {        Sys.sleep(x/4)        if (x == 1) stop("boom")        x    }}), new.env()): boom>
Assert that all futures are resolved by value()
[1] TRUE TRUE TRUE TRUE
plan('multisession') .. done

> message("Shut down future backend")
Shut down future backend

> plan(sequential)

> gc()
          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  563023 30.1    1180802 63.1  1180802 63.1
Vcells 1069311  8.2    8388608 64.0  1973849 15.1
Skipping, because path appears not to be an 'R CMD check' folder: ‘/tmp’
Test time: user.self=0.5s, sys.self=0.09s, elapsed=3s, user.child=0.2s, sys.child=0.4s
Test ‘value-error-cancels-set’ ... success
> 

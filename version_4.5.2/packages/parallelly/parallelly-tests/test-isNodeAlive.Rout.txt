
R version 4.5.2 (2025-10-31) -- "[Not] Part in a Rumble"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> #! /usr/bin/env Rscript
> ## This runs testme test script inst/testme/test-isNodeAlive.R
> ## Don't edit - it was autogenerated by inst/testme/deploy.R
> parallelly:::testme("isNodeAlive")
Test ‘isNodeAlive’ ...

> library(parallelly)

> message("*** isNodeAlive() ...")
*** isNodeAlive() ...

> res <- isNodeAlive(list())

> print(res)
[1] NA

> stopifnot(is.na(res))

> cl <- makeClusterPSOCK(1)

> print(cl)
Socket cluster with 1 node on host ‘localhost’ (R version 4.5.2 (2025-10-31), platform x86_64-pc-linux-gnu)

> res <- isNodeAlive(cl)

> print(res)
[1] TRUE

> stopifnot(is.logical(res), length(res) == 1)

> parallel::stopCluster(cl)

> cl <- makeClusterPSOCK(1)

> node <- cl[[1]]

> node$session_info$process$pid <- NULL

> res <- isNodeAlive(node)

> print(res)
[1] NA

> stopifnot(is.na(res))

> parallel::stopCluster(cl)

> cl <- makeClusterPSOCK(1)

> node <- cl[[1]]

> node$session_info$system$nodename <- NULL

> res <- isNodeAlive(node)

> print(res)
[1] NA

> stopifnot(is.na(res))

> parallel::stopCluster(cl)

> cl <- makeClusterPSOCK(1)

> node <- cl[[1]]

> res <- isNodeAlive(node, timeout = 1)

> print(res)
[1] TRUE

> stopifnot(is.logical(res), length(res) == 1)

> parallel::stopCluster(cl)

> message("- isNodeAlive.RichSOCKnode (with timeout) ... DONE")
- isNodeAlive.RichSOCKnode (with timeout) ... DONE

> message("- isNodeAlive.RichSOCKnode (with invalid PID) ...")
- isNodeAlive.RichSOCKnode (with invalid PID) ...

> cl <- makeClusterPSOCK(1)

> node <- cl[[1]]

> node$session_info$process$pid <- -1

> res <- tryCatch({
+     isNodeAlive(node)
+ }, warning = function(w) {
+     message("  Caught expected warning: ", conditionMessage(w))
+     NA
+  .... [TRUNCATED] 
  Caught expected warning: Could not infer whether RichSOCKnode node is alive. Reason reported: ‘pid > 0L’ is not TRUE

> print(res)
[1] NA

> stopifnot(is.na(res))

> parallel::stopCluster(cl)

> message("- isNodeAlive.RichSOCKnode (with invalid PID) ... DONE")
- isNodeAlive.RichSOCKnode (with invalid PID) ... DONE

> if (.Platform[["OS.type"]] != "windows") {
+     message("- isNodeAlive.RichSOCKnode (remote host path) ...")
+     cl <- makeClusterPSOCK(1)
+      .... [TRUNCATED] 
- isNodeAlive.RichSOCKnode (remote host path) ...
[1] NA
- isNodeAlive.RichSOCKnode (remote host path) ... DONE
- isNodeAlive.RichSOCKnode (remote host with user) ...
[1] NA
- isNodeAlive.RichSOCKnode (remote host with user) ... DONE
- isNodeAlive.RichSOCKnode (remote host with small timeout) ...
[1] NA
- isNodeAlive.RichSOCKnode (remote host with small timeout) ... DONE
- isNodeAlive.RichSOCKnode (remote host with debug) ...
[10:25:49.371] isNodeAlive() for RichSOCKnode ...
[10:25:49.371] |  Timeout: 1 seconds
[10:25:49.371] |  The R worker is running on another host
[10:25:49.371] |  Rscript command to be called on the other host: '/usr/local/lib/R/bin/Rscript' -e 'cat(parallelly:::pid_exists(104732))'
[10:25:49.372] |  Command to connect to the other host: 'echo'  localhost
[10:25:49.372] |  System call: 'echo'  localhost "'/usr/local/lib/R/bin/Rscript' -e 'cat(parallelly:::pid_exists(104732))'"
[10:25:49.372] |  Timeout: 1 seconds
[10:25:49.377] |  Results: localhost '/usr/local/lib/R/bin/Rscript' -e 'cat(parallelly:::pid_exists(104732))'
[10:25:49.378] isNodeAlive() for RichSOCKnode ... DONE
[1] NA
- isNodeAlive.RichSOCKnode (remote host with debug) ... DONE

> message("*** isNodeAlive() ... DONE")
*** isNodeAlive() ... DONE
Test time: user.self=0.1s, sys.self=0.02s, elapsed=2s, user.child=0.2s, sys.child=0.4s
Test ‘isNodeAlive’ ... success
> 

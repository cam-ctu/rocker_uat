
R version 4.4.2 (2024-10-31) -- "Pile of Leaves"
Copyright (C) 2024 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> 
> library(testthat)
> library(renv, warn.conflicts = FALSE)
> 
> if (!renv:::renv_tests_supported()) {
+   message("* renv does not support running tests on this platform.")
+   if (!interactive()) quit(status = 0L)
+ }
> 
> if (Sys.info()[["sysname"]] == "Linux") {
+   tools <- asNamespace("tools")
+   if (is.function(tools$R_user_dir)) {
+     cachedir <- tools$R_user_dir("renv", "cache")
+     dir.create(cachedir, recursive = TRUE, showWarnings = FALSE)
+   }
+ }
> 
> test_check("renv")
Starting 2 test processes
[ FAIL 4 | WARN 3 | SKIP 202 | PASS 735 ]

══ Skipped tests (202) ═════════════════════════════════════════════════════════
• empty test (3): 'test-dependencies.R:222:1', 'test-dependencies.R:575:1',
  'test-json.R:140:1'
• failing test; mtime sometimes differs? (1): 'test-files.R:130:3'
• GITHUB_PAT is not set (6): 'test-install.R:111:3', 'test-install.R:154:3',
  'test-install.R:208:3', 'test-retrieve.R:360:3', 'test-update.R:20:3',
  'test-update.R:51:3'
• On CRAN (189): 'test-python.R:15:3', 'test-python.R:29:3',
  'test-python.R:45:3', 'test-python.R:63:3', 'test-python.R:93:3',
  'test-python.R:139:3', 'test-python.R:182:3', 'test-python.R:208:3',
  'test-python.R:236:3', 'test-restore.R:16:3', 'test-restore.R:33:3',
  'test-restore.R:268:3', 'test-restore.R:296:3', 'test-install.R:65:3',
  'test-install.R:197:3', 'test-install.R:255:3', 'test-install.R:262:3',
  'test-install.R:273:3', 'test-install.R:291:3', 'test-install.R:317:3',
  'test-install.R:333:3', 'test-install.R:344:3', 'test-install.R:401:3',
  'test-install.R:424:3', 'test-install.R:445:3', 'test-install.R:468:3',
  'test-install.R:492:3', 'test-install.R:510:3', 'test-install.R:518:3',
  'test-install.R:545:3', 'test-install.R:574:3', 'test-install.R:610:3',
  'test-install.R:762:3', 'test-retrieve.R:4:3', 'test-retrieve.R:20:3',
  'test-retrieve.R:36:3', 'test-retrieve.R:52:3', 'test-retrieve.R:70:3',
  'test-retrieve.R:85:3', 'test-retrieve.R:104:3', 'test-retrieve.R:120:3',
  'test-retrieve.R:138:3', 'test-retrieve.R:153:3', 'test-retrieve.R:161:3',
  'test-retrieve.R:282:3', 'test-retrieve.R:299:3', 'test-retrieve.R:315:3',
  'test-retrieve.R:354:3', 'test-retrieve.R:367:3', 'test-remotes.R:32:3',
  'test-remotes.R:205:3', 'test-acls.R:4:3', 'test-activate.R:4:3',
  'test-activate.R:29:3', 'test-activate.R:50:3', 'test-archive.R:51:3',
  'test-autoload.R:3:3', 'test-available-packages.R:3:3',
  'test-available-packages.R:23:3', 'test-available-packages.R:44:3',
  'test-available-packages.R:60:3', 'test-available-packages.R:78:3',
  'test-available-packages.R:90:3', 'test-available-packages.R:111:3',
  'test-available-packages.R:132:3', 'test-available-packages.R:158:3',
  'test-bootstrap.R:4:3', 'test-bootstrap.R:18:3', 'test-bootstrap.R:32:3',
  'test-bootstrap.R:147:3', 'test-bootstrap.R:168:3', 'test-bootstrap.R:189:3',
  'test-bootstrap.R:219:3', 'test-bootstrap.R:258:3', 'test-snapshot.R:23:3',
  'test-snapshot.R:36:3', 'test-snapshot.R:111:3', 'test-snapshot.R:170:3',
  'test-snapshot.R:355:3', 'test-snapshot.R:361:3', 'test-snapshot.R:384:3',
  'test-snapshot.R:393:3', 'test-snapshot.R:414:3', 'test-snapshot.R:432:3',
  'test-snapshot.R:445:3', 'test-snapshot.R:485:3', 'test-snapshot.R:518:3',
  'test-snapshot.R:538:3', 'test-snapshot.R:554:3', 'test-caution.R:3:3',
  'test-caution.R:15:3', 'test-cellar.R:3:3', 'test-checkout.R:20:3',
  'test-cache.R:3:3', 'test-cache.R:108:3', 'test-cache.R:127:3',
  'test-cache.R:155:3', 'test-cache.R:186:3', 'test-config.R:91:3',
  'test-dots.R:10:3', 'test-download.R:3:3', 'test-download.R:60:3',
  'test-download.R:116:3', 'test-download.R:143:3', 'test-download.R:158:3',
  'test-files.R:203:3', 'test-history.R:4:3', 'test-id.R:3:3',
  'test-infrastructure.R:4:3', 'test-dependencies.R:97:3',
  'test-dependencies.R:107:3', 'test-dependencies.R:490:3', 'test-json.R:54:3',
  'test-json.R:64:3', 'test-load.R:25:3', 'test-load.R:43:3',
  'test-load.R:57:3', 'test-init.R:3:3', 'test-init.R:12:3',
  'test-init.R:65:3', 'test-init.R:133:3', 'test-init.R:163:3',
  'test-init.R:181:3', 'test-init.R:214:3', 'test-init.R:224:3',
  'test-init.R:234:3', 'test-lockfile-read.R:5:3',
  'test-lockfile-validate.R:4:3', 'test-lockfile-validate.R:64:3',
  'test-lockfile-validate.R:125:3', 'test-lockfile-validate.R:180:3',
  'test-lockfile-validate.R:234:3', 'test-lockfile-validate.R:266:3',
  'test-lockfile-validate.R:298:3', 'test-lockfile.R:44:3',
  'test-lockfile.R:54:3', 'test-migrate.R:21:3', 'test-migrate.R:61:3',
  'test-modify.R:4:3', 'test-modify.R:16:3', 'test-mran.R:3:3',
  'test-ppm.R:3:3', 'test-ppm.R:15:3', 'test-ppm.R:27:3', 'test-ppm.R:39:3',
  'test-ppm.R:51:3', 'test-ppm.R:78:3', 'test-ppm.R:111:3', 'test-ppm.R:143:3',
  'test-ppm.R:175:3', 'test-ppm.R:208:3', 'test-ppm.R:235:3',
  'test-ppm.R:260:3', 'test-ppm.R:284:3', 'test-ppm.R:311:3',
  'test-ppm.R:336:3', 'test-ppm.R:363:3', 'test-ppm.R:387:3',
  'test-preflight.R:23:3', 'test-profile.R:3:3', 'test-profile.R:34:3',
  'test-lock.R:152:3', 'test-profiles.R:3:3', 'test-profiles.R:34:3',
  'test-r.R:3:3', 'test-r.R:48:3', 'test-reload.R:3:3', 'test-repair.R:4:3',
  'test-repair.R:27:3', 'test-repair.R:55:3', 'test-repos.R:59:3',
  'test-sandbox.R:116:3', 'test-socket.R:4:3', 'test-system.R:3:3',
  'test-status.R:4:3', 'test-status.R:20:3', 'test-status.R:33:3',
  'test-status.R:46:3', 'test-status.R:57:3', 'test-status.R:74:3',
  'test-status.R:86:3', 'test-upgrade.R:4:3', 'test-use.R:4:3',
  'test-use.R:24:3', 'test-utils.R:159:3', 'test-vendor.R:8:3',
  'test-watchdog.R:4:3', 'test-watchdog.R:39:3', 'test-update.R:4:3'
• renv_platform_macos() is not TRUE (1): 'test-retrieve.R:238:3'
• renv_platform_windows() is not TRUE (1): 'test-install.R:223:3'
• wait for STRICT_R_HEADERS compliance (1): 'test-bioconductor.R:21:1'

══ Failed tests ════════════════════════════════════════════════════════════════
── Failure ('test-restore.R:6:3'): library permissions are validated before restore ──
renv_install_preflight_permissions(inaccessible) is not FALSE

`actual`:   TRUE 
`expected`: FALSE
── Failure ('test-cache.R:86:3'): package installation does not fail with non-writable cache ──
type == "symlink" is not FALSE

`actual`:   TRUE 
`expected`: FALSE
── Failure ('test-dependencies.R:386:3'): dependencies() doesn't barf on files without read permission ──
`renv_file_read("secrets/secrets.R")` did not throw the expected error.
── Failure ('test-dependencies.R:388:3'): dependencies() doesn't barf on files without read permission ──
NROW(deps) == 0L is not TRUE

`actual`:   FALSE
`expected`: TRUE 

[ FAIL 4 | WARN 3 | SKIP 202 | PASS 735 ]
Error: Test failures
Execution halted

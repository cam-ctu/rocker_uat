
R version 4.5.0 (2025-04-11) -- "How About a Twenty-Six"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> source("incl/start,load-only.R")
[10:49:27.532] Future-specific environment variables:
[10:49:27.533] Environment variable ‘R_FUTURE_DEMO_MANDELBROT_REGION’ not set
[10:49:27.533] Environment variable ‘R_FUTURE_DEMO_MANDELBROT_NROW’ not set
[10:49:27.533] Environment variable ‘R_FUTURE_DEPRECATED_IGNORE’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_DEPRECATED_DEFUNCT’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_FORK_MULTITHREADING_ENABLE’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_GLOBALS_MAXSIZE’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_GLOBALS_ONMISSING’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_GLOBALS_ONREFERENCE’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_GLOBALS_METHOD’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_GLOBALS_RESOLVE’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_LAZY_ASSERTOWNER’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_PLAN’ not set
[10:49:27.534] Environment variable ‘R_FUTURE_PLAN_DISALLOW’ not set
[10:49:27.535] Environment variable ‘R_FUTURE_PSOCK_RELAY_IMMEDIATE’ not set
[10:49:27.535] Environment variable ‘R_FUTURE_RELAY_IMMEDIATE’ not set
[10:49:27.535] Environment variable ‘R_FUTURE_RESOLVE_RECURSIVE’ not set
[10:49:27.535] Environment variable ‘R_FUTURE_ALIVE_TIMEOUT’ not set
[10:49:27.535] Environment variable ‘R_FUTURE_RESOLVED_TIMEOUT’ not set
[10:49:27.535] Environment variable ‘R_FUTURE_CLUSTER_RESOLVED_TIMEOUT’ not set
[10:49:27.535] Environment variable ‘R_FUTURE_MULTICORE_RESOLVED_TIMEOUT’ not set
[10:49:27.535] Environment variable ‘R_FUTURE_ONFUTURECONDITION_KEEPFUTURE’ not set
[10:49:27.535] Environment variable ‘R_FUTURE_RNG_ONMISUSE’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_GLOBALENV_ONMISUSE’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_WAIT_TIMEOUT’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_WAIT_INTERVAL’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_WAIT_ALPHA’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_ASSIGN_GLOBALS_EXCLUDE’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_OUTPUT_WINDOWS_REENCODE’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_GLOBALS_GLOBALSOF_LOCALS’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_STATE_ONINVALID’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_JOURNAL’ not set
[10:49:27.536] Environment variable ‘R_FUTURE_GLOBALS_KEEPWHERE’ not set
[10:49:27.537] Environment variable ‘R_FUTURE_GLOBALS_OBJECTSIZE_METHOD’ not set
[10:49:27.537] Environment variable ‘R_FUTURE_CONNECTIONS_ONMISUSE’ not set
[10:49:27.537] Environment variable ‘R_FUTURE_DEVICES_ONMISUSE’ not set
[10:49:27.537] R process uuid: 1977dab470d268b53c00c5fc370bde2e
[10:49:27.537] Setting plan('default')
[10:49:27.538] plan(<character>, .skip = FALSE, .cleanup = NA, .init = FALSE) ...
[10:49:27.538] |  Created default stack
[10:49:27.538] |  Getting default stack: ‘sequential’, ‘uniprocess’, ‘future’, ‘function’
[10:49:27.538] |  plan(): plan_set(<1 strategies>, skip = FALSE, cleanup = NA, init = FALSE) ...
[10:49:27.539] |  :  all.equal() for FutureStrategyList ...
[10:49:27.539] |  :  .  New stack:
[10:49:27.539] |  :  .  List of 1
[10:49:27.539] |  :  .   $ :function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:27.539] |  :  .    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:27.539] |  :  .    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:27.539] |  :  .    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.539] |  :  .    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.539] |  :  .   - attr(*, "class")= chr [1:2] "FutureStrategyList" "list"
[10:49:27.543] |  :  .  Old stack:
[10:49:27.543] |  :  .  List of 1
[10:49:27.543] |  :  .   $ :function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:27.543] |  :  .    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:27.543] |  :  .    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:27.543] |  :  .    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.543] |  :  .    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.543] |  :  .    ..- attr(*, "call")= language plan(sequential)
[10:49:27.543] |  :  .   - attr(*, "class")= chr [1:2] "FutureStrategyList" "list"
[10:49:27.545] |  :  .  Not identical
[10:49:27.545] |  :  .  all.equal() for future ...
[10:49:27.545] |  :  .  |  List of 2
[10:49:27.545] |  :  .  |   $ target :function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:27.545] |  :  .  |    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:27.545] |  :  .  |    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:27.545] |  :  .  |    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.545] |  :  .  |    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.545] |  :  .  |   $ current:function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:27.545] |  :  .  |    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:27.545] |  :  .  |    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:27.545] |  :  .  |    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.545] |  :  .  |    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.545] |  :  .  |    ..- attr(*, "call")= language plan(sequential)
[10:49:27.549] |  :  .  all.equal() for future ... done
[10:49:27.549] |  :  all.equal() for FutureStrategyList ... done
[10:49:27.549] |  :  plan(): Skip setting new future strategy stack because it is the same as the current one:
[10:49:27.550] |  :  List of future strategies:
[10:49:27.550] |  :  1. sequential:
[10:49:27.550] |  :     - args: function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame(), workers = "<NULL>")
[10:49:27.550] |  :     - tweaked: FALSE
[10:49:27.550] |  :     - call: plan(sequential)
[10:49:27.550] |  plan(): plan_set(<1 strategies>, skip = FALSE, cleanup = NA, init = FALSE) ... done
[10:49:27.550] plan(<list>, .skip = FALSE, .cleanup = NA, .init = FALSE) ... done
[10:49:27.551] plan(<NULL>, .skip = FALSE, .cleanup = NA, .init = TRUE) ...
[10:49:27.551] |  Getting current ("next") strategy: ‘FutureStrategy’, ‘sequential’, ‘uniprocess’, ‘future’, ‘function’
[10:49:27.551] plan(<FutureStrategy>, .skip = FALSE, .cleanup = NA, .init = TRUE) ... done
[10:49:27.551] plan(<character>, .skip = FALSE, .cleanup = NA, .init = TRUE) ...
[10:49:27.590] |  plan(): plan_set(<1 strategies>, skip = FALSE, cleanup = NA, init = TRUE) ...
[10:49:27.590] |  :  all.equal() for FutureStrategyList ...
[10:49:27.590] |  :  .  New stack:
[10:49:27.591] |  :  .  List of 1
[10:49:27.591] |  :  .   $ :function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:27.591] |  :  .    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:27.591] |  :  .    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:27.591] |  :  .    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.591] |  :  .    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.591] |  :  .    ..- attr(*, "call")= language future::plan("sequential")
[10:49:27.591] |  :  .   - attr(*, "class")= chr [1:2] "FutureStrategyList" "list"
[10:49:27.593] |  :  .  Old stack:
[10:49:27.593] |  :  .  List of 1
[10:49:27.593] |  :  .   $ :function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:27.593] |  :  .    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:27.593] |  :  .    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:27.593] |  :  .    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.593] |  :  .    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.593] |  :  .    ..- attr(*, "call")= language plan(sequential)
[10:49:27.593] |  :  .   - attr(*, "class")= chr [1:2] "FutureStrategyList" "list"
[10:49:27.595] |  :  .  Not identical
[10:49:27.595] |  :  .  all.equal() for future ...
[10:49:27.595] |  :  .  |  List of 2
[10:49:27.595] |  :  .  |   $ target :function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:27.595] |  :  .  |    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:27.595] |  :  .  |    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:27.595] |  :  .  |    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.595] |  :  .  |    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.595] |  :  .  |    ..- attr(*, "call")= language future::plan("sequential")
[10:49:27.595] |  :  .  |   $ current:function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:27.595] |  :  .  |    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:27.595] |  :  .  |    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:27.595] |  :  .  |    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.595] |  :  .  |    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:27.595] |  :  .  |    ..- attr(*, "call")= language plan(sequential)
[10:49:27.601] |  :  .  all.equal() for future ... done
[10:49:27.601] |  :  all.equal() for FutureStrategyList ... done
[10:49:27.601] |  :  plan(): Skip setting new future strategy stack because it is the same as the current one:
[10:49:27.601] |  :  List of future strategies:
[10:49:27.601] |  :  1. sequential:
[10:49:27.601] |  :     - args: function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame(), workers = "<NULL>")
[10:49:27.601] |  :     - tweaked: FALSE
[10:49:27.601] |  :     - call: plan(sequential)
[10:49:27.602] |  plan(): plan_set(<1 strategies>, skip = FALSE, cleanup = NA, init = TRUE) ... done
[10:49:27.602] plan(<sequential>, .skip = FALSE, .cleanup = NA, .init = TRUE) ... done
> 
> message("*** fold() ...")
*** fold() ...
> 
> x1s <- list(
+   a = NULL,
+   b = 1,
+   c = c(a = 1, b = 2),
+   d = 1:10e3
+ )
> 
> x2s <- lapply(x1s, FUN = as.list)
> names(x2s) <- toupper(names(x1s))
> 
> x3s <- list(
+   E = data.frame(a = 1:3),
+   F = data.frame(a = 1:3, b = letters[1:3], stringsAsFactors=FALSE)
+ )
> 
> xs <- c(x1s, x2s, x3s)
> 
> 
> fcns <- list("c" = base::c, "cbind" = base::cbind)
> for (kk in seq_along(xs)) {
+   x_name <- names(xs)[kk]
+   for (fcn_name in names(fcns)) {
+     fcn <- fcns[[fcn_name]]
+     message(sprintf(" - #%d. %s(x[['%s']]) ...", kk, fcn_name, x_name))
+     x <- xs[[kk]]
+     str(list(x = x))
+     
+     y0 <- Reduce(x, f = fcn)
+     y1 <- fold(x, f = fcn)
+     y2 <- fold(x, f = fcn, unname = FALSE)
+     str(list(y0 = y0, y1 = y1, y2 = y2))
+     stopifnot(all.equal(unname(y1), unname(y0)))
+     stopifnot(all.equal(unname(y2), unname(y0)))
+     if (!fcn_name %in% "cbind") {
+       stopifnot(all.equal(y1, y0))
+       stopifnot(all.equal(y2, y0))
+     }
+     
+     y0 <- Reduce(x, f = fcn, right = TRUE)
+     y1 <- fold(x, f = fcn, left = FALSE)
+     y2 <- fold(x, f = fcn, left = FALSE, unname = FALSE)
+     str(list(y0 = y0, y1 = y1, y2 = y2))
+     stopifnot(all.equal(unname(y1), unname(y0)))
+     stopifnot(all.equal(unname(y2), unname(y0)))
+     if (!fcn_name %in% "cbind") {
+       stopifnot(all.equal(y1, y0))
+       stopifnot(all.equal(y2, y0))
+     }
+     
+     message(sprintf(" - #%d. %s(x[['%s']]) ... DONE", kk, fcn_name, x_name))
+   }
+ }
 - #1. c(x[['a']]) ...
List of 1
 $ x: NULL
List of 3
 $ y0: NULL
 $ y1: NULL
 $ y2: NULL
List of 3
 $ y0: NULL
 $ y1: NULL
 $ y2: NULL
 - #1. c(x[['a']]) ... DONE
 - #1. cbind(x[['a']]) ...
List of 1
 $ x: NULL
List of 3
 $ y0: NULL
 $ y1: NULL
 $ y2: NULL
List of 3
 $ y0: NULL
 $ y1: NULL
 $ y2: NULL
 - #1. cbind(x[['a']]) ... DONE
 - #2. c(x[['b']]) ...
List of 1
 $ x: num 1
List of 3
 $ y0: num 1
 $ y1: num 1
 $ y2: num 1
List of 3
 $ y0: num 1
 $ y1: num 1
 $ y2: num 1
 - #2. c(x[['b']]) ... DONE
 - #2. cbind(x[['b']]) ...
List of 1
 $ x: num 1
List of 3
 $ y0: num 1
 $ y1: num 1
 $ y2: num 1
List of 3
 $ y0: num 1
 $ y1: num 1
 $ y2: num 1
 - #2. cbind(x[['b']]) ... DONE
 - #3. c(x[['c']]) ...
List of 1
 $ x: Named num [1:2] 1 2
  ..- attr(*, "names")= chr [1:2] "a" "b"
List of 3
 $ y0: num [1:2] 1 2
 $ y1: num [1:2] 1 2
 $ y2: num [1:2] 1 2
List of 3
 $ y0: num [1:2] 1 2
 $ y1: num [1:2] 1 2
 $ y2: num [1:2] 1 2
 - #3. c(x[['c']]) ... DONE
 - #3. cbind(x[['c']]) ...
List of 1
 $ x: Named num [1:2] 1 2
  ..- attr(*, "names")= chr [1:2] "a" "b"
List of 3
 $ y0: num [1, 1:2] 1 2
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "init" ""
 $ y1: num [1, 1:2] 1 2
 $ y2: num [1, 1:2] 1 2
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "y" ""
List of 3
 $ y0: num [1, 1:2] 1 2
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "" "init"
 $ y1: num [1, 1:2] 1 2
 $ y2: num [1, 1:2] 1 2
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "" "y"
 - #3. cbind(x[['c']]) ... DONE
 - #4. c(x[['d']]) ...
List of 1
 $ x: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
List of 3
 $ y0: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y1: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y2: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
List of 3
 $ y0: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y1: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y2: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 - #4. c(x[['d']]) ... DONE
 - #4. cbind(x[['d']]) ...
List of 1
 $ x: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
List of 3
 $ y0: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:10000] "init" "" "" "" ...
 $ y1: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y2: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:10000] "y" "" "" "" ...
List of 3
 $ y0: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:10000] "" "" "" "" ...
 $ y1: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y2: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:10000] "" "" "" "" ...
 - #4. cbind(x[['d']]) ... DONE
 - #5. c(x[['A']]) ...
List of 1
 $ x: list()
List of 3
 $ y0: NULL
 $ y1: NULL
 $ y2: NULL
List of 3
 $ y0: NULL
 $ y1: NULL
 $ y2: NULL
 - #5. c(x[['A']]) ... DONE
 - #5. cbind(x[['A']]) ...
List of 1
 $ x: list()
List of 3
 $ y0: NULL
 $ y1: NULL
 $ y2: NULL
List of 3
 $ y0: NULL
 $ y1: NULL
 $ y2: NULL
 - #5. cbind(x[['A']]) ... DONE
 - #6. c(x[['B']]) ...
List of 1
 $ x:List of 1
  ..$ : num 1
List of 3
 $ y0: num 1
 $ y1: num 1
 $ y2: num 1
List of 3
 $ y0: num 1
 $ y1: num 1
 $ y2: num 1
 - #6. c(x[['B']]) ... DONE
 - #6. cbind(x[['B']]) ...
List of 1
 $ x:List of 1
  ..$ : num 1
List of 3
 $ y0: num 1
 $ y1: num 1
 $ y2: num 1
List of 3
 $ y0: num 1
 $ y1: num 1
 $ y2: num 1
 - #6. cbind(x[['B']]) ... DONE
 - #7. c(x[['C']]) ...
List of 1
 $ x:List of 2
  ..$ a: num 1
  ..$ b: num 2
List of 3
 $ y0: num [1:2] 1 2
 $ y1: num [1:2] 1 2
 $ y2: num [1:2] 1 2
List of 3
 $ y0: num [1:2] 1 2
 $ y1: num [1:2] 1 2
 $ y2: num [1:2] 1 2
 - #7. c(x[['C']]) ... DONE
 - #7. cbind(x[['C']]) ...
List of 1
 $ x:List of 2
  ..$ a: num 1
  ..$ b: num 2
List of 3
 $ y0: num [1, 1:2] 1 2
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "init" ""
 $ y1: num [1, 1:2] 1 2
 $ y2: num [1, 1:2] 1 2
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "y" ""
List of 3
 $ y0: num [1, 1:2] 1 2
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "" "init"
 $ y1: num [1, 1:2] 1 2
 $ y2: num [1, 1:2] 1 2
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "" "y"
 - #7. cbind(x[['C']]) ... DONE
 - #8. c(x[['D']]) ...
List of 1
 $ x:List of 10000
  ..$ : int 1
  ..$ : int 2
  ..$ : int 3
  ..$ : int 4
  ..$ : int 5
  ..$ : int 6
  ..$ : int 7
  ..$ : int 8
  ..$ : int 9
  ..$ : int 10
  ..$ : int 11
  ..$ : int 12
  ..$ : int 13
  ..$ : int 14
  ..$ : int 15
  ..$ : int 16
  ..$ : int 17
  ..$ : int 18
  ..$ : int 19
  ..$ : int 20
  ..$ : int 21
  ..$ : int 22
  ..$ : int 23
  ..$ : int 24
  ..$ : int 25
  ..$ : int 26
  ..$ : int 27
  ..$ : int 28
  ..$ : int 29
  ..$ : int 30
  ..$ : int 31
  ..$ : int 32
  ..$ : int 33
  ..$ : int 34
  ..$ : int 35
  ..$ : int 36
  ..$ : int 37
  ..$ : int 38
  ..$ : int 39
  ..$ : int 40
  ..$ : int 41
  ..$ : int 42
  ..$ : int 43
  ..$ : int 44
  ..$ : int 45
  ..$ : int 46
  ..$ : int 47
  ..$ : int 48
  ..$ : int 49
  ..$ : int 50
  ..$ : int 51
  ..$ : int 52
  ..$ : int 53
  ..$ : int 54
  ..$ : int 55
  ..$ : int 56
  ..$ : int 57
  ..$ : int 58
  ..$ : int 59
  ..$ : int 60
  ..$ : int 61
  ..$ : int 62
  ..$ : int 63
  ..$ : int 64
  ..$ : int 65
  ..$ : int 66
  ..$ : int 67
  ..$ : int 68
  ..$ : int 69
  ..$ : int 70
  ..$ : int 71
  ..$ : int 72
  ..$ : int 73
  ..$ : int 74
  ..$ : int 75
  ..$ : int 76
  ..$ : int 77
  ..$ : int 78
  ..$ : int 79
  ..$ : int 80
  ..$ : int 81
  ..$ : int 82
  ..$ : int 83
  ..$ : int 84
  ..$ : int 85
  ..$ : int 86
  ..$ : int 87
  ..$ : int 88
  ..$ : int 89
  ..$ : int 90
  ..$ : int 91
  ..$ : int 92
  ..$ : int 93
  ..$ : int 94
  ..$ : int 95
  ..$ : int 96
  ..$ : int 97
  ..$ : int 98
  ..$ : int 99
  .. [list output truncated]
List of 3
 $ y0: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y1: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y2: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
List of 3
 $ y0: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y1: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y2: int [1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 - #8. c(x[['D']]) ... DONE
 - #8. cbind(x[['D']]) ...
List of 1
 $ x:List of 10000
  ..$ : int 1
  ..$ : int 2
  ..$ : int 3
  ..$ : int 4
  ..$ : int 5
  ..$ : int 6
  ..$ : int 7
  ..$ : int 8
  ..$ : int 9
  ..$ : int 10
  ..$ : int 11
  ..$ : int 12
  ..$ : int 13
  ..$ : int 14
  ..$ : int 15
  ..$ : int 16
  ..$ : int 17
  ..$ : int 18
  ..$ : int 19
  ..$ : int 20
  ..$ : int 21
  ..$ : int 22
  ..$ : int 23
  ..$ : int 24
  ..$ : int 25
  ..$ : int 26
  ..$ : int 27
  ..$ : int 28
  ..$ : int 29
  ..$ : int 30
  ..$ : int 31
  ..$ : int 32
  ..$ : int 33
  ..$ : int 34
  ..$ : int 35
  ..$ : int 36
  ..$ : int 37
  ..$ : int 38
  ..$ : int 39
  ..$ : int 40
  ..$ : int 41
  ..$ : int 42
  ..$ : int 43
  ..$ : int 44
  ..$ : int 45
  ..$ : int 46
  ..$ : int 47
  ..$ : int 48
  ..$ : int 49
  ..$ : int 50
  ..$ : int 51
  ..$ : int 52
  ..$ : int 53
  ..$ : int 54
  ..$ : int 55
  ..$ : int 56
  ..$ : int 57
  ..$ : int 58
  ..$ : int 59
  ..$ : int 60
  ..$ : int 61
  ..$ : int 62
  ..$ : int 63
  ..$ : int 64
  ..$ : int 65
  ..$ : int 66
  ..$ : int 67
  ..$ : int 68
  ..$ : int 69
  ..$ : int 70
  ..$ : int 71
  ..$ : int 72
  ..$ : int 73
  ..$ : int 74
  ..$ : int 75
  ..$ : int 76
  ..$ : int 77
  ..$ : int 78
  ..$ : int 79
  ..$ : int 80
  ..$ : int 81
  ..$ : int 82
  ..$ : int 83
  ..$ : int 84
  ..$ : int 85
  ..$ : int 86
  ..$ : int 87
  ..$ : int 88
  ..$ : int 89
  ..$ : int 90
  ..$ : int 91
  ..$ : int 92
  ..$ : int 93
  ..$ : int 94
  ..$ : int 95
  ..$ : int 96
  ..$ : int 97
  ..$ : int 98
  ..$ : int 99
  .. [list output truncated]
List of 3
 $ y0: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:10000] "init" "" "" "" ...
 $ y1: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y2: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:10000] "y" "" "" "" ...
List of 3
 $ y0: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:10000] "" "" "" "" ...
 $ y1: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
 $ y2: int [1, 1:10000] 1 2 3 4 5 6 7 8 9 10 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:10000] "" "" "" "" ...
 - #8. cbind(x[['D']]) ... DONE
 - #9. c(x[['E']]) ...
List of 1
 $ x:'data.frame':	3 obs. of  1 variable:
  ..$ a: int [1:3] 1 2 3
List of 3
 $ y0: int [1:3] 1 2 3
 $ y1: int [1:3] 1 2 3
 $ y2: int [1:3] 1 2 3
List of 3
 $ y0: int [1:3] 1 2 3
 $ y1: int [1:3] 1 2 3
 $ y2: int [1:3] 1 2 3
 - #9. c(x[['E']]) ... DONE
 - #9. cbind(x[['E']]) ...
List of 1
 $ x:'data.frame':	3 obs. of  1 variable:
  ..$ a: int [1:3] 1 2 3
List of 3
 $ y0: int [1:3] 1 2 3
 $ y1: int [1:3] 1 2 3
 $ y2: int [1:3] 1 2 3
List of 3
 $ y0: int [1:3] 1 2 3
 $ y1: int [1:3] 1 2 3
 $ y2: int [1:3] 1 2 3
 - #9. cbind(x[['E']]) ... DONE
 - #10. c(x[['F']]) ...
List of 1
 $ x:'data.frame':	3 obs. of  2 variables:
  ..$ a: int [1:3] 1 2 3
  ..$ b: chr [1:3] "a" "b" "c"
List of 3
 $ y0: chr [1:6] "1" "2" "3" "a" ...
 $ y1: chr [1:6] "1" "2" "3" "a" ...
 $ y2: chr [1:6] "1" "2" "3" "a" ...
List of 3
 $ y0: chr [1:6] "1" "2" "3" "a" ...
 $ y1: chr [1:6] "1" "2" "3" "a" ...
 $ y2: chr [1:6] "1" "2" "3" "a" ...
 - #10. c(x[['F']]) ... DONE
 - #10. cbind(x[['F']]) ...
List of 1
 $ x:'data.frame':	3 obs. of  2 variables:
  ..$ a: int [1:3] 1 2 3
  ..$ b: chr [1:3] "a" "b" "c"
List of 3
 $ y0: chr [1:3, 1:2] "1" "2" "3" "a" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "init" ""
 $ y1: chr [1:3, 1:2] "1" "2" "3" "a" ...
 $ y2: chr [1:3, 1:2] "1" "2" "3" "a" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "y" ""
List of 3
 $ y0: chr [1:3, 1:2] "1" "2" "3" "a" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "" "init"
 $ y1: chr [1:3, 1:2] "1" "2" "3" "a" ...
 $ y2: chr [1:3, 1:2] "1" "2" "3" "a" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "" "y"
 - #10. cbind(x[['F']]) ... DONE
> 
> 
> make_table <- function(n) {
+   data.frame(key = sample(n), value = sample(n), stringsAsFactors=FALSE)
+ }
> 
> sizes <- rep(10, 20)
> 
> set.seed(3180)
> tables <- lapply(sizes, make_table)
> 
> key_merge <- function(x, y) merge(x, y, by = "key", all = FALSE)
> 
> suppressWarnings(
+ folded <- fold(tables, key_merge, left = TRUE, unname = FALSE,
+                threshold = 6L)
+ )
> 
> suppressWarnings(
+ reduced <- Reduce(key_merge, tables[-1], tables[[1]])
+ )
> 
> stopifnot(all.equal(unname(folded), unname(reduced)))
> 
> message("*** fold() ... DONE")
*** fold() ... DONE
> 
> source("incl/end.R")
[10:49:29.646] plan(<name>, .skip = FALSE, .cleanup = NA, .init = TRUE) ...
[10:49:29.646] |  plan(): plan_set(<1 strategies>, skip = FALSE, cleanup = NA, init = TRUE) ...
[10:49:29.646] |  :  all.equal() for FutureStrategyList ...
[10:49:29.646] |  :  .  New stack:
[10:49:29.646] |  :  .  List of 1
[10:49:29.646] |  :  .   $ :function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:29.646] |  :  .    ..- attr(*, "class")= chr [1:5] "FutureStrategy" "sequential" "uniprocess" "future" ...
[10:49:29.646] |  :  .    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:29.646] |  :  .    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:29.646] |  :  .    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:29.646] |  :  .    ..- attr(*, "call")= language plan(sequential)
[10:49:29.646] |  :  .   - attr(*, "class")= chr [1:2] "FutureStrategyList" "list"
[10:49:29.650] |  :  .  Old stack:
[10:49:29.650] |  :  .  List of 1
[10:49:29.650] |  :  .   $ :function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:29.650] |  :  .    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:29.650] |  :  .    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:29.650] |  :  .    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:29.650] |  :  .    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:29.650] |  :  .    ..- attr(*, "call")= language plan(sequential)
[10:49:29.650] |  :  .   - attr(*, "class")= chr [1:2] "FutureStrategyList" "list"
[10:49:29.652] |  :  .  Not identical
[10:49:29.652] |  :  .  all.equal() for future ...
[10:49:29.652] |  :  .  |  List of 2
[10:49:29.652] |  :  .  |   $ target :function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:29.652] |  :  .  |    ..- attr(*, "class")= chr [1:5] "FutureStrategy" "sequential" "uniprocess" "future" ...
[10:49:29.652] |  :  .  |    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:29.652] |  :  .  |    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:29.652] |  :  .  |    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:29.652] |  :  .  |    ..- attr(*, "call")= language plan(sequential)
[10:49:29.652] |  :  .  |   $ current:function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame())  
[10:49:29.652] |  :  .  |    ..- attr(*, "class")= chr [1:4] "sequential" "uniprocess" "future" "function"
[10:49:29.652] |  :  .  |    ..- attr(*, "factory")=function (..., maxSizeOfObjects = +Inf)  
[10:49:29.652] |  :  .  |    .. ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:29.652] |  :  .  |    ..- attr(*, "tweakable")= chr [1:5] "maxSizeOfObjects" "earlySignal" "gc" "interrupts" ...
[10:49:29.652] |  :  .  |    ..- attr(*, "call")= language plan(sequential)
[10:49:29.656] |  :  .  all.equal() for future ... done
[10:49:29.656] |  :  all.equal() for FutureStrategyList ... done
[10:49:29.656] |  :  plan(): Skip setting new future strategy stack because it is the same as the current one:
[10:49:29.656] |  :  List of future strategies:
[10:49:29.656] |  :  1. sequential:
[10:49:29.656] |  :     - args: function (..., gc = FALSE, earlySignal = FALSE, envir = parent.frame(), workers = "<NULL>")
[10:49:29.656] |  :     - tweaked: FALSE
[10:49:29.656] |  :     - call: plan(sequential)
[10:49:29.657] |  plan(): plan_set(<1 strategies>, skip = FALSE, cleanup = NA, init = TRUE) ... done
[10:49:29.657] plan(<FutureStrategy>, .skip = FALSE, .cleanup = NA, .init = TRUE) ... done
> 

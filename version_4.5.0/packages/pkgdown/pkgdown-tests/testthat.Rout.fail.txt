
R version 4.5.0 (2025-04-11) -- "How About a Twenty-Six"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(testthat)
> library(pkgdown)
> 
> test_check("pkgdown")
Starting 2 test processes
[ FAIL 14 | WARN 4 | SKIP 130 | PASS 695 ]

══ Skipped tests (130) ═════════════════════════════════════════════════════════
• On CRAN (129): 'test-build-reference.R:3:3', 'test-build-reference.R:118:3',
  'test-build-articles.R:14:3', 'test-build-articles.R:29:3',
  'test-build-articles.R:79:3', 'test-build-articles.R:103:3',
  'test-build-favicons.R:4:3', 'test-build-favicons.R:17:3',
  'test-build-footer.R:19:3', 'test-build-footer.R:81:3',
  'test-build-github.R:5:3', 'test-build-home-authors.R:26:3',
  'test-build-home-authors.R:39:3', 'test-build-home-authors.R:130:3',
  'test-build-home-authors.R:136:3', 'test-build-home-authors.R:265:3',
  'test-build-home-community.R:11:3', 'test-build-home-index.R:4:3',
  'test-build-home-index.R:41:3', 'test-build-home-index.R:60:3',
  'test-build-home-index.R:90:3', 'test-build-home-index.R:113:3',
  'test-build-home-index.R:124:3', 'test-build-home-index.R:133:3',
  'test-build-home-index.R:147:3', 'test-build-home-index.R:177:3',
  'test-build-news.R:17:3', 'test-build-news.R:58:3',
  'test-build-news.R:117:3', 'test-build-news.R:122:3',
  'test-build-news.R:127:3', 'test-build-news.R:206:3',
  'test-build-news.R:226:3', 'test-build-news.R:241:3',
  'test-build-news.R:256:3', 'test-build-news.R:276:3',
  'test-build-article.R:59:3', 'test-build-article.R:141:3',
  'test-build-article.R:153:3', 'test-build-article.R:208:3',
  'test-build-article.R:214:3', 'test-build-article.R:297:3',
  'test-build-article.R:306:3', 'test-build-article.R:360:3',
  'test-build-article.R:385:3', 'test-build-redirects.R:10:3',
  'test-build-redirects.R:27:3', 'test-build-reference-index.R:10:3',
  'test-build-reference-index.R:60:3', 'test-build-reference-index.R:74:3',
  'test-build-reference-index.R:128:3', 'test-build-reference-index.R:141:3',
  'test-build-search-docs.R:43:3', 'test-build-search-docs.R:51:3',
  'test-check-built.R:7:3', 'test-check.R:9:3', 'test-check.R:22:3',
  'test-check.R:35:3', 'test-check.R:44:3', 'test-check.R:55:3',
  'test-check.R:72:3', 'test-config.R:10:3', 'test-config.R:15:3',
  'test-config.R:34:3', 'test-development.R:54:3', 'test-external-deps.R:4:3',
  'test-highlight.R:14:3', 'test-highlight.R:28:3', 'test-highlight.R:60:3',
  'test-init.R:3:3', 'test-init.R:62:3', 'test-markdown.R:24:3',
  'test-markdown.R:61:3', 'test-markdown.R:70:3', 'test-navbar-menu.R:10:3',
  'test-navbar-menu.R:20:3', 'test-navbar-menu.R:28:3',
  'test-navbar-menu.R:50:3', 'test-navbar-menu.R:82:3',
  'test-navbar-menu.R:86:3', 'test-navbar.R:3:3', 'test-navbar.R:15:3',
  'test-navbar.R:25:3', 'test-navbar.R:100:3', 'test-navbar.R:117:3',
  'test-navbar.R:140:3', 'test-navbar.R:149:3', 'test-navbar.R:191:3',
  'test-package.R:2:3', 'test-package.R:23:3', 'test-package.R:29:3',
  'test-package.R:101:3', 'test-preview.R:4:3', 'test-rd-example.R:113:3',
  'test-build-quarto-articles.R:80:3', 'test-rd-html.R:7:3',
  'test-rd-html.R:32:3', 'test-rd-html.R:36:3', 'test-rd-html.R:55:3',
  'test-rd-html.R:314:3', 'test-rd-html.R:388:3', 'test-rd-html.R:399:3',
  'test-rd-html.R:412:3', 'test-rd-html.R:424:3', 'test-render.R:11:3',
  'test-render.R:55:3', 'test-repo.R:71:3', 'test-theme.R:5:3',
  'test-theme.R:36:3', 'test-topics-external.R:2:3',
  'test-topics-external.R:10:3', 'test-templates.R:132:3',
  'test-templates.R:141:3', 'test-templates.R:201:3',
  'test-tweak-homepage.R:46:3', 'test-tweak-homepage.R:71:3',
  'test-tweak-homepage.R:85:3', 'test-tweak-tabset.R:25:3',
  'test-tweak-tags.R:74:3', 'test-tweak-tags.R:206:3',
  'test-tweak-tags.R:313:3', 'test-topics.R:19:3', 'test-topics.R:37:3',
  'test-topics.R:75:3', 'test-topics.R:173:3', 'test-topics.R:186:3',
  'test-utils-fs.R:2:3', 'test-utils-fs.R:9:3', 'test-usage.R:23:3'
• packageVersion("knitr") < "1.50.3" is TRUE (1): 'test-build-article.R:246:3'

══ Failed tests ════════════════════════════════════════════════════════════════
── Failure ('test-build-home-authors.R:17:3'): authors page includes multiline inst/AUTHORS ──
`content` does not match "<pre>Hello ------ bla bla</pre>".
Actual value: "<!DOCTYPE html> <!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Authors and Citation • testpackage</title><!-- pkgdown --><script src="pkgdown\.js"></script><meta property="og:title" content="Authors and Citation"></head><body>     <a href="#main" class="visually-hidden-focusable">Skip to contents</a>       <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">      <a class="navbar-brand me-2" href="index\.html">testpackage</a>      <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1\.0\.0</small>       <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">       <span class="navbar-toggler-icon"></span>     </button>      <div id="navbar" class="collapse navbar-collapse ms-3">       <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index\.html">Reference</a></li>       </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">  <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search\.json"></form></li>       </ul></div>     </div> </nav><div class="container template-citation-authors"> <div class="row">   <main id="main" class="col-md-9"><div class="page-header">        <h1>Authors and Citation</h1>     </div>      <div class="section level2">       <h2>Authors</h2>        <ul class="list-unstyled"><li>           <p><strong>Jo Doe</strong>\. Author, maintainer\.           </p>         </li>       </ul></div>      <div class="section level2">       <h2 id="citation">Citation</h2>       <p></p>        <p>Doe J \(2025\)\. <em>testpackage: A test package</em>\. R package version 1\.0\.0\. </p>       <pre>@Manual\{,   title = \{testpackage: A test package\},   author = \{Jo Doe\},   year = \{2025\},   note = \{R package version 1\.0\.0\}, \}</pre>     </div>      <div class="section level2">       <h2>Additional details</h2>       <pre>Hello</pre>     </div>     <div class="section level2">       <h2>Additional details</h2>       <pre>------</pre>     </div>     <div class="section level2">       <h2>Additional details</h2>       <pre>bla bla</pre>     </div>   </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>     </nav></aside></div>       <footer><div class="pkgdown-footer-left">   <p>Developed by Jo Doe\.</p> </div>  <div class="pkgdown-footer-right">   <p>Site built with <a href="https://pkgdown\.r-lib\.org/" class="external-link">pkgdown</a> 2\.1\.1\.</p> </div>      </footer></div>        </body></html> "
Backtrace:
    ▆
 1. └─testthat::expect_match(content, "<pre>Hello ------ bla bla</pre>") at test-build-home-authors.R:17:3
 2.   └─testthat:::expect_match_(...)
── Error ('test-build-home-authors.R:85:3'): ROR can be identified & removed from all comment styles ──
Error in `ror_link("1")`: could not find function "ror_link"
Backtrace:
    ▆
 1. └─testthat::expect_equal(...) at test-build-home-authors.R:85:3
 2.   └─testthat::quasi_label(enquo(expected), expected.label, arg = "expected")
 3.     └─rlang::eval_bare(expr, quo_get_env(quo))
── Failure ('test-build-home-index.R:189:3'): ANSI are handled ─────────────────
xml2::xml_text(readme_p) (`actual`) not equal to "prefer \u2029[34ma\u2029[39m" (`expected`).

`actual`:   "prefer [34ma[39m"            
`expected`: "prefer \u2029[34ma\u2029[39m"
── Failure ('test-build-article.R:177:3'): can control math mode ───────────────
path_file(xpath_attr(html, ".//script", "src")) (`actual`) doesn't fully contain all the values in c("katex-auto.js", "auto-render.min.js", "katex.min.js") (`expected`).
* Missing from `actual`: "auto-render.min.js"
* Present in `actual`:   "katex-auto.js", "jquery-3.6.0.min.js", "bootstrap.bundle.min.js", "headroom.min.js", "jQuery.headroom.min.js", "bootstrap-toc.min.js", "clipboard.min.js", "autocomplete.jquery.min.js", "fuse.min.js", ...

── Failure ('test-package.R:142:3'): as_pkgdown sets language ──────────────────
pkg$lang (`actual`) not equal to "fr" (`expected`).

`actual`:   "en"
`expected`: "fr"
── Failure ('test-package.R:148:3'): as_pkgdown sets language ──────────────────
pkg$lang (`actual`) not equal to "en-US" (`expected`).

`actual`:   "en"   
`expected`: "en-US"
── Error ('test-build-quarto-articles.R:135:3'): can build quarto articles in articles folder ──
Error in `.f(.x[[i]], .y[[i]], ...)`: No built file found for 'vignettes/articles/vig1.qmd'
Backtrace:
     ▆
  1. ├─base::suppressMessages(build_articles(pkg)) at test-build-quarto-articles.R:135:3
  2. │ └─base::withCallingHandlers(...)
  3. └─pkgdown::build_articles(pkg)
  4.   └─pkgdown:::build_quarto_articles(pkg, quiet = quiet)
  5.     ├─pkgdown:::unwrap_purrr_error(...)
  6.     │ └─base::withCallingHandlers(...)
  7.     └─purrr::walk2(...)
  8.       └─purrr::map2(.x, .y, .f, ..., .progress = .progress)
  9.         └─purrr:::map2_("list", .x, .y, .f, ..., .progress = .progress)
 10.           ├─purrr:::with_indexed_errors(...)
 11.           │ └─base::withCallingHandlers(...)
 12.           ├─purrr:::call_with_cleanup(...)
 13.           └─pkgdown (local) .f(.x[[i]], .y[[i]], ...)
 14.             └─cli::cli_abort("No built file found for {.file {input_file}}")
 15.               └─rlang::abort(...)
── Failure ('test-repo.R:142:3'): can find codeberg url ────────────────────────
package_repo(pkg) (`actual`) not equal to repo_meta_gh_like(url) (`expected`).

`actual` is NULL
`expected` is a list
── Failure ('test-repo.R:168:3'): GitLab subgroups are properly parsed ─────────
issue_url(URL = base) (`actual`) not identical to `expected` (`expected`).

`actual`:   "https://gitlab.com/salim_b/r/pkgs/pal/issues/"  
`expected`: "https://gitlab.com/salim_b/r/pkgs/pal/-/issues/"
── Failure ('test-repo.R:169:3'): GitLab subgroups are properly parsed ─────────
issue_url(URL = paste0(base, "/")) (`actual`) not identical to `expected` (`expected`).

`actual`:   "https://gitlab.com/salim_b/r/pkgs/pal/issues/"  
`expected`: "https://gitlab.com/salim_b/r/pkgs/pal/-/issues/"
── Failure ('test-repo.R:170:3'): GitLab subgroups are properly parsed ─────────
issue_url(BugReports = paste0(base, "/issues")) (`actual`) not identical to `expected` (`expected`).

`actual`:   "https://gitlab.com/salim_b/r/pkgs/pal/issues/"  
`expected`: "https://gitlab.com/salim_b/r/pkgs/pal/-/issues/"
── Failure ('test-repo.R:171:3'): GitLab subgroups are properly parsed ─────────
issue_url(BugReports = paste0(base, "/issues/")) (`actual`) not identical to `expected` (`expected`).

`actual`:   "https://gitlab.com/salim_b/r/pkgs/pal/issues/"  
`expected`: "https://gitlab.com/salim_b/r/pkgs/pal/-/issues/"
── Failure ('test-repo.R:207:3'): repo_type detects repo type ──────────────────
repo_type2("https://codeberg.org/r-lib/pkgdown") (`actual`) not equal to "codeberg" (`expected`).

`actual`:   "other"   
`expected`: "codeberg"
── Failure ('test-tweak-page.R:202:3'): slashes not URL encoded during relative path conversion ──
xpath_attr(html, ".//img", "src") (`actual`) not equal to "img/kitten.jpg" (`expected`).

`actual`:   "img%2Fkitten.jpg"
`expected`: "img/kitten.jpg"  

[ FAIL 14 | WARN 4 | SKIP 130 | PASS 695 ]
Error: Test failures
Execution halted


R version 4.5.0 (2025-04-11) -- "How About a Twenty-Six"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> ## This runs testme test script incl/testme/test-whichIndex.R
> ## Don't edit - it was autogenerated by inst/testme/deploy.R
> future:::testme("whichIndex")
Test ‘whichIndex’ ...
Sourcing 9 prologue scripts ...
01/09 prologue script ‘/usr/local/lib/R/site-library/future/testme/_prologue/001.load.R’
02/09 prologue script ‘/usr/local/lib/R/site-library/future/testme/_prologue/002.record-state.R’
03/09 prologue script ‘/usr/local/lib/R/site-library/future/testme/_prologue/030.imports.R’
04/09 prologue script ‘/usr/local/lib/R/site-library/future/testme/_prologue/050.utils.R’
05/09 prologue script ‘/usr/local/lib/R/site-library/future/testme/_prologue/090.context.R’
06/09 prologue script ‘/usr/local/lib/R/site-library/future/testme/_prologue/090.options.R’
07/09 prologue script ‘/usr/local/lib/R/site-library/future/testme/_prologue/091.envvars.R’
08/09 prologue script ‘/usr/local/lib/R/site-library/future/testme/_prologue/099.future-setup.R’
09/09 prologue script ‘/usr/local/lib/R/site-library/future/testme/_prologue/995.detrius-connections.R’
Sourcing 9 prologue scripts ... done
Running test script: ‘/usr/local/lib/R/site-library/future/testme/test-whichIndex.R’

> message("*** whichIndex() ...")
*** whichIndex() ...

> dims <- list(c(1), c(1, 1), c(2), c(2, 1), c(3, 4, 
+     3))

> for (dim in dims) {
+     printf("Dimensions: (%s)\n", paste(dim, collapse = ", "))
+     dimnames <- lapply(dim, FUN = function(n) letters[seq_len( .... [TRUNCATED] 
Dimensions: (1)
a 
1 
[1] 1
     [,1]
[1,]    1
[1] 1
     [,1]
[1,] "a" 
[1] 1
  V1
1  a
[1] 1
Dimensions: (1, 1)
  a
a 1
[1] 1
     [,1] [,2]
[1,]    1    1
[1] 1
     [,1] [,2]
[1,] "a"  "a" 
[1] 1
  V1 V2
1  a  a
[1] 1
Dimensions: (2)
a b 
1 2 
[1] 1 2
     [,1]
[1,]    1
[2,]    2
[1] 1 2
     [,1]
[1,] "a" 
[2,] "b" 
[1] 1 2
  V1
1  a
2  b
[1] 1 2
Dimensions: (2, 1)
  a
a 1
b 2
[1] 1 2
     [,1] [,2]
[1,]    1    1
[2,]    2    1
[1] 1 2
     [,1] [,2]
[1,] "a"  "a" 
[2,] "b"  "a" 
[1] 1 2
  V1 V2
1  a  a
2  b  a
[1] 1 2
Dimensions: (3, 4, 3)
, , a

  a b c  d
a 1 4 7 10
b 2 5 8 11
c 3 6 9 12

, , b

   a  b  c  d
a 13 16 19 22
b 14 17 20 23
c 15 18 21 24

, , c

   a  b  c  d
a 25 28 31 34
b 26 29 32 35
c 27 30 33 36

[1]  1 10 18 27 36
     [,1] [,2] [,3]
[1,]    1    1    1
[2,]    1    4    1
[3,]    3    2    2
[4,]    3    1    3
[5,]    3    4    3
[1]  1 10 18 27 36
     [,1] [,2] [,3]
[1,] "a"  "a"  "a" 
[2,] "a"  "d"  "a" 
[3,] "c"  "b"  "b" 
[4,] "c"  "a"  "c" 
[5,] "c"  "d"  "c" 
[1]  1 10 18 27 36
  V1 V2 V3
1  a  a  a
2  a  d  a
3  c  b  b
4  c  a  c
5  c  d  c
[1]  1 10 18 27 36

> dim <- c(2, 3)

> ndim <- length(dim)

> dimnames <- lapply(dim, FUN = function(n) letters[seq_len(n)])

> I <- matrix(c(1, 1, 2, 4), ncol = ndim)

> res <- try(idxs <- whichIndex(I, dim = dim, dimnames = dimnames), 
+     silent = TRUE)

> stopifnot(inherits(res, "try-error"))

> I <- matrix(c(0, 0), ncol = ndim)

> res <- try(idxs <- whichIndex(I, dim = dim, dimnames = dimnames), 
+     silent = TRUE)

> stopifnot(inherits(res, "try-error"))

> I <- matrix(c("a", "q"), ncol = ndim)

> res <- try(idxs <- whichIndex(I, dim = dim, dimnames = dimnames), 
+     silent = TRUE)

> stopifnot(inherits(res, "try-error"))

> D <- data.frame(a = c(1, 1), b = c(2, 4))

> res <- try(idxs <- whichIndex(D, dim = dim, dimnames = dimnames), 
+     silent = TRUE)

> stopifnot(inherits(res, "try-error"))

> D <- data.frame(a = c("a", "q"), b = c(1, 2), stringsAsFactors = FALSE)

> res <- try(idxs <- whichIndex(D, dim = dim, dimnames = dimnames), 
+     silent = TRUE)

> stopifnot(inherits(res, "try-error"))

> message("*** whichIndex() ... DONE")
*** whichIndex() ... DONE
Sourcing 6 epilogue scripts ...
01/06 epilogue script ‘/usr/local/lib/R/site-library/future/testme/_epilogue/001.undo-future.R’
02/06 epilogue script ‘/usr/local/lib/R/site-library/future/testme/_epilogue/002.undo-state.R’
03/06 epilogue script ‘/usr/local/lib/R/site-library/future/testme/_epilogue/090.gc.R’
04/06 epilogue script ‘/usr/local/lib/R/site-library/future/testme/_epilogue/099.session_info.R’
05/06 epilogue script ‘/usr/local/lib/R/site-library/future/testme/_epilogue/995.detritus-connections.R’
06/06 epilogue script ‘/usr/local/lib/R/site-library/future/testme/_epilogue/999.detritus-files.R’
Skipping, because path appears not to be an 'R CMD check' folder: ‘/tmp’
Sourcing 6 epilogue scripts ... done
Test time: user.self=0.09s, sys.self=0.006s, elapsed=0.1s, user.child=0.003s, sys.child=0.003s
Test ‘whichIndex’ ... success
> 

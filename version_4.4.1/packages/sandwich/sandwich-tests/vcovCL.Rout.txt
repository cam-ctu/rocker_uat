
R version 4.4.1 (2024-06-14) -- "Race for Your Life"
Copyright (C) 2024 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library("sandwich")
> data("PetersenCL", package = "sandwich")
> m <- lm(y ~ x, data = PetersenCL)
> b <- glm((y > 0) ~ x, data = PetersenCL, family = binomial(link = "logit"))
> 
> options(digits = 3)
> 
> ## various versatile variance flavors
> vcovCL(m, cluster = ~ firm, type = "HC0", cadjust = TRUE)
            (Intercept)         x
(Intercept)    4.49e-03 -6.47e-05
x             -6.47e-05  2.56e-03
> vcovCL(m, cluster = ~ firm, type = "HC0", cadjust = FALSE)
            (Intercept)         x
(Intercept)    4.48e-03 -6.46e-05
x             -6.46e-05  2.55e-03
> vcovCL(m, cluster = ~ firm, type = "HC1", cadjust = TRUE)
            (Intercept)         x
(Intercept)    4.49e-03 -6.47e-05
x             -6.47e-05  2.56e-03
> vcovCL(m, cluster = ~ firm, type = "HC1", cadjust = FALSE)
            (Intercept)         x
(Intercept)    4.48e-03 -6.46e-05
x             -6.46e-05  2.55e-03
> vcovCL(m, cluster = ~ firm, type = "HC2", cadjust = TRUE)
            (Intercept)         x
(Intercept)    4.49e-03 -6.59e-05
x             -6.59e-05  2.57e-03
> vcovCL(m, cluster = ~ firm, type = "HC2", cadjust = FALSE)
            (Intercept)         x
(Intercept)    4.49e-03 -6.58e-05
x             -6.58e-05  2.56e-03
> vcovCL(m, cluster = ~ firm, type = "HC3", cadjust = TRUE)
            (Intercept)         x
(Intercept)    4.51e-03 -6.73e-05
x             -6.73e-05  2.58e-03
> vcovCL(m, cluster = ~ firm, type = "HC3", cadjust = FALSE)
            (Intercept)         x
(Intercept)    4.50e-03 -6.71e-05
x             -6.71e-05  2.58e-03
> 
> vcovCL(m, cluster = ~ firm + year, type = "HC0", cadjust = TRUE)
            (Intercept)         x
(Intercept)    4.23e-03 -2.84e-05
x             -2.84e-05  2.87e-03
> vcovCL(m, cluster = ~ firm + year, type = "HC0", cadjust = FALSE)
            (Intercept)         x
(Intercept)    4.17e-03 -3.08e-05
x             -3.08e-05  2.75e-03
> vcovCL(m, cluster = ~ firm + year, type = "HC1", cadjust = TRUE)
            (Intercept)         x
(Intercept)    4.23e-03 -2.85e-05
x             -2.85e-05  2.87e-03
> vcovCL(m, cluster = ~ firm + year, type = "HC1", cadjust = FALSE)
            (Intercept)         x
(Intercept)    4.17e-03 -3.08e-05
x             -3.08e-05  2.75e-03
> vcovCL(m, cluster = ~ firm + year, type = "HC2", cadjust = TRUE)
            (Intercept)         x
(Intercept)    4.24e-03 -2.82e-05
x             -2.82e-05  2.88e-03
> vcovCL(m, cluster = ~ firm + year, type = "HC2", cadjust = FALSE)
            (Intercept)         x
(Intercept)    4.17e-03 -3.07e-05
x             -3.07e-05  2.76e-03
> vcovCL(m, cluster = ~ firm + year, type = "HC3", cadjust = TRUE)
            (Intercept)         x
(Intercept)    0.004312 -0.000025
x             -0.000025  0.003015
> vcovCL(m, cluster = ~ firm + year, type = "HC3", cadjust = FALSE)
            (Intercept)         x
(Intercept)    0.004242 -0.000028
x             -0.000028  0.002886
> 
> 
> ## comparison with multiwayvcov::cluster.vcov
> if(!require("multiwayvcov")) q()
Loading required package: multiwayvcov
Warning message:
In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,  :
  there is no package called ‘multiwayvcov’

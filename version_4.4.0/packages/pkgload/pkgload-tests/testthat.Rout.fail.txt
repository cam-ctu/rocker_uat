
R version 4.4.0 (2024-04-24) -- "Puppy Cup"
Copyright (C) 2024 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(testthat)
> library(pkgload)
> 
> # Needed so that install.packages works correctly
> Sys.setenv("R_TESTS" = "")
> 
> test_check("pkgload")
Starting 2 test processes
[ FAIL 17 | WARN 1 | SKIP 14 | PASS 286 ]

══ Skipped tests (14) ══════════════════════════════════════════════════════════
• "pkgload" %in% dev_packages() is not TRUE (1): 'test-shim.R:126:3'
• mathjaxr cannot be loaded (1): 'test-help.R:137:3'
• On CRAN (12): 'test-depend.R:5:3', 'test-depend.R:15:3',
  'test-depend.R:43:3', 'test-help.R:45:3', 'test-help.R:116:3',
  'test-help.R:129:3', 'test-help.R:150:3', 'test-load-hooks.R:166:3',
  'test-load.R:44:3', 'test-shim.R:59:3', 'test-shim.R:135:3',
  'test-source.R:2:3'

══ Failed tests ════════════════════════════════════════════════════════════════
── Error ('test-depend.R:27:3'): Packages in depends are required ──────────────
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_depends(path, quiet = quiet)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testDependMissing") at test-depend.R:27:3
 2.   └─pkgload:::load_depends(path, quiet = quiet)
 3.     └─pkgload:::deps_check_installed(path, depends)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-help.R:104:3'): dev_help gives clear error if no packages loaded ──
<packageNotFoundError/error/condition>
Error in `loadNamespace(x)`: there is no package called 'mockr'
Backtrace:
    ▆
 1. └─base::loadNamespace(x) at test-help.R:104:3
 2.   └─base::withRestarts(stop(cond), retry_loadNamespace = function() NULL)
 3.     └─base (local) withOneRestart(expr, restarts[[1L]])
 4.       └─base (local) doWithOneRestart(return(expr), restart)
── Error ('test-imports.R:4:3'): Imported objects are copied to package environment ──
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-imports.R:4:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-imports.R:33:3'): Imported objects are be re-exported ──────────
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace", export_imports = FALSE) at test-imports.R:33:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-metadata.R:14:3'): devtools metadata for load hooks ────────────
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-metadata.R:14:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Failure ('test-metadata.R:28:3'): dev_packages() lists devtools-loaded packages ──
any(c("testNamespace", "testLoadHooks") %in% dev_packages()) is not FALSE

`actual`:   TRUE 
`expected`: FALSE
── Failure ('test-metadata.R:29:3'): dev_packages() lists devtools-loaded packages ──
"testNamespace" %in% dev_packages() is not FALSE

`actual`:   TRUE 
`expected`: FALSE
── Error ('test-metadata.R:32:3'): dev_packages() lists devtools-loaded packages ──
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-metadata.R:32:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-po.R:35:5'): modified translations are correctly reloaded ──────
Error in `eval(code, test_env)`: Failed to run msgfmt
── Error ('test-namespace.R:22:3'): Loaded namespaces have correct version ─────
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-namespace.R:22:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-namespace.R:31:3'): Exported objects are visible from global environment ──
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-namespace.R:31:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-namespace.R:55:3'): All objects are loaded into namespace environment ──
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-namespace.R:55:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-namespace.R:64:3'): All objects are copied to package environment ──
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-namespace.R:64:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-namespace.R:80:3'): Unloading and reloading a package works ────
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-namespace.R:80:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-namespace.R:103:3'): Namespace, imports, and package environments have correct hierarchy ──
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-namespace.R:103:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-namespace.R:121:3'): unload() removes package environments from search ──
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-namespace.R:121:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)
── Error ('test-namespace.R:147:3'): Environments have the correct attributes ──
<rlib_error_package_not_found/rlang_error/error/condition>
Error in `load_imports(path)`: The package "bitops" is required.
Backtrace:
    ▆
 1. └─pkgload::load_all("testNamespace") at test-namespace.R:147:3
 2.   └─pkgload:::load_imports(path)
 3.     └─pkgload:::deps_check_installed(path, imports)
 4.       └─rlang::check_installed(pkg, action = action, call = call)

[ FAIL 17 | WARN 1 | SKIP 14 | PASS 286 ]
Error: Test failures
Execution halted

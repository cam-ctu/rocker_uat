
R version 4.4.3 (2025-02-28) -- "Trophy Case"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(testthat)
> library(purrr)

Attaching package: ‘purrr’

The following object is masked from ‘package:testthat’:

    is_null

> 
> test_check("purrr")
Starting 2 test processes
[ FAIL 14 | WARN 0 | SKIP 123 | PASS 674 ]

══ Skipped tests (123) ═════════════════════════════════════════════════════════
• On CRAN (123): 'test-adverb-auto-browse.R:2:3',
  'test-adverb-insistently.R:3:3', 'test-adverb-insistently.R:8:3',
  'test-adverb-compose.R:50:3', 'test-adverb-slowly.R:2:3',
  'test-arrays.R:17:3', 'test-coerce.R:5:3', 'test-coerce.R:19:3',
  'test-coerce.R:31:3', 'test-coerce.R:64:3', 'test-adverb-partial.R:66:3',
  'test-adverb-partial.R:147:3', 'test-adverb-partial.R:176:3',
  'test-deprec-along.R:2:3', 'test-conditions.R:2:3', 'test-conditions.R:8:3',
  'test-conditions.R:14:3', 'test-conditions.R:18:3',
  'test-deprec-cross.R:22:3', 'test-deprec-cross.R:28:3',
  'test-deprec-invoke.R:2:3', 'test-deprec-lift.R:45:3',
  'test-deprec-map.R:2:3', 'test-deprec-prepend.R:2:3',
  'test-deprec-prepend.R:36:3', 'test-deprec-rerun.R:2:3',
  'test-deprec-splice.R:20:3', 'test-deprec-utils.R:2:3',
  'test-deprec-utils.R:29:3', 'test-deprec-when.R:2:3',
  'test-deprec-when.R:72:3', 'test-detect.R:25:3', 'test-detect.R:34:3',
  'test-every-some-none.R:20:3', 'test-head-tail.R:17:3', 'test-keep.R:12:3',
  'test-list-flatten.R:23:3', 'test-list-combine.R:5:3',
  'test-list-combine.R:11:3', 'test-list-combine.R:27:3',
  'test-list-combine.R:34:3', 'test-list-combine.R:50:3',
  'test-list-combine.R:58:3', 'test-list-combine.R:84:3',
  'test-list-combine.R:99:3', 'test-list-modify.R:90:3',
  'test-list-modify.R:128:3', 'test-list-modify.R:135:3',
  'test-list-simplify.R:16:3', 'test-list-simplify.R:22:3',
  'test-list-simplify.R:40:3', 'test-list-simplify.R:45:3',
  'test-list-transpose.R:11:3', 'test-list-transpose.R:71:3',
  'test-list-transpose.R:89:3', 'test-list-transpose.R:105:3',
  'test-list-transpose.R:118:3', 'test-list-transpose.R:131:3',
  'test-list-transpose.R:135:3', 'test-list-transpose.R:146:3',
  'test-lmap.R:54:3', 'test-map-if-at.R:28:3', 'test-map-raw.R:2:3',
  'test-map-depth.R:11:3', 'test-map-depth.R:17:3', 'test-map-depth.R:52:3',
  'test-map-depth.R:76:3', 'test-map-depth.R:92:3', 'test-map2.R:27:3',
  'test-map2.R:41:3', 'test-map2.R:52:3', 'test-map.R:12:3', 'test-map.R:34:3',
  'test-map.R:51:3', 'test-map.R:130:3', 'test-map.R:147:3',
  'test-modify-tree.R:39:3', 'test-pluck-assign.R:50:3',
  'test-pluck-depth.R:25:3', 'test-modify.R:18:3', 'test-modify.R:28:3',
  'test-modify.R:54:3', 'test-modify.R:138:3', 'test-modify.R:145:3',
  'test-modify.R:151:3', 'test-pluck.R:3:3', 'test-pluck.R:27:3',
  'test-pluck.R:35:3', 'test-pluck.R:50:3', 'test-pluck.R:65:3',
  'test-pluck.R:81:3', 'test-pluck.R:90:3', 'test-pluck.R:109:3',
  'test-pluck.R:114:3', 'test-pluck.R:123:3', 'test-pluck.R:176:3',
  'test-pluck.R:201:3', 'test-pluck.R:206:3', 'test-pluck.R:220:3',
  'test-pluck.R:226:3', 'test-pluck.R:258:7', 'test-pmap.R:28:3',
  'test-pmap.R:46:3', 'test-pmap.R:57:3', 'test-rate.R:20:3',
  'test-rate.R:48:3', 'test-rate.R:69:3', 'test-rate.R:75:3',
  'test-superseded-flatten.R:4:3', 'test-superseded-flatten.R:11:3',
  'test-superseded-flatten.R:62:3', 'test-reduce.R:2:3', 'test-reduce.R:120:3',
  'test-reduce.R:134:3', 'test-reduce.R:138:3',
  'test-superseded-transpose.R:2:3', 'test-superseded-transpose.R:6:3',
  'test-superseded-transpose.R:53:3', 'test-utils.R:13:3', 'test-utils.R:34:3',
  'test-utils.R:39:3', 'test-utils.R:57:3', 'test-utils.R:112:3'

══ Failed tests ════════════════════════════════════════════════════════════════
── Error ('test-coerce.R:37:3'): can coerce to character vectors ───────────────
Error: Can't coerce from a number to a string.
Backtrace:
    ▆
 1. └─testthat::expect_snapshot(...) at test-coerce.R:37:3
 2.   └─rlang::cnd_signal(state$error)
── Error ('test-coerce.R:52:3'): error captures correct env ────────────────────
<purrr_error_indexed/rlang_error/error/condition>
Error in `purrr::map_chr(1:4, identity)`: i In index: 1.
Caused by error:
! Can't coerce from an integer to a string.
Backtrace:
     ▆
  1. ├─rlang (local) indirect()
  2. │ └─purrr::map_chr(1:4, identity) at test-coerce.R:48:5
  3. │   └─purrr:::map_("character", .x, .f, ..., .progress = .progress)
  4. │     ├─purrr:::with_indexed_errors(...)
  5. │     │ └─base::withCallingHandlers(...)
  6. │     └─purrr:::call_with_cleanup(...)
  7. └─base::.handleSimpleError(...)
  8.   └─purrr (local) h(simpleError(msg, call))
  9.     └─cli::cli_abort(...)
 10.       └─rlang::abort(...)
── Error ('test-coerce.R:60:3'): warns once per vector ─────────────────────────
Error: Can't coerce from an integer vector to a string.
Backtrace:
     ▆
  1. ├─testthat::expect_warning(expect_warning(coerce_chr(1:5)), NA) at test-coerce.R:60:3
  2. │ └─testthat:::expect_condition_matching(...)
  3. │   └─testthat:::quasi_capture(...)
  4. │     ├─testthat (local) .capture(...)
  5. │     │ └─base::withCallingHandlers(...)
  6. │     └─rlang::eval_bare(quo_get_expr(.quo), quo_get_env(.quo))
  7. ├─testthat::expect_warning(coerce_chr(1:5))
  8. │ └─testthat:::expect_condition_matching(...)
  9. │   └─testthat:::quasi_capture(...)
 10. │     ├─testthat (local) .capture(...)
 11. │     │ └─base::withCallingHandlers(...)
 12. │     └─rlang::eval_bare(quo_get_expr(.quo), quo_get_env(.quo))
 13. └─purrr:::coerce_chr(1:5)
 14.   └─purrr:::coerce(x, "character")
── Failure ('test-adverb-partial.R:160:3'): `.lazy` still works ────────────────
counter$n (`actual`) not identical to 1 (`expected`).

  `actual`: 10.0
`expected`:  1.0
── Failure ('test-adverb-partial.R:168:3'): `.first` still works ───────────────
`out` (`actual`) not identical to `exp` (`expected`).

`actual`:   `runif(n = rpois(1, 5), .first = FALSE, ...)`
`expected`: `runif(..., n = rpois(1, 5))`                
── Failure ('test-adverb-partial.R:171:3'): `.first` still works ───────────────
partialised_body(partial(runif, .first = TRUE)) (`actual`) not identical to expr(runif(...)) (`expected`).

`actual`:   `runif(.first = TRUE, ...)`
`expected`: `runif(...)`               
── Failure ('test-adverb-partial.R:172:3'): `.first` still works ───────────────
partialised_body(partial(runif, .first = FALSE)) (`actual`) not identical to expr(runif(...)) (`expected`).

`actual`:   `runif(.first = FALSE, ...)`
`expected`: `runif(...)`                
── Error ('test-detect.R:43:3'): `.right` argument still works ─────────────────
Error in `.fn(...)`: unused argument (.right = TRUE)
Backtrace:
    ▆
 1. ├─testthat::expect_equal(detect(y, is_odd, .right = TRUE), 9) at test-detect.R:43:3
 2. │ └─testthat::quasi_label(enquo(object), label, arg = "object")
 3. │   └─rlang::eval_bare(expr, quo_get_env(quo))
 4. └─purrr::detect(y, is_odd, .right = TRUE)
 5.   └─purrr (local) .f(.x[[i]], ...)
── Failure ('test-map-mapper.R:54:3'): primitive functions are wrapped ─────────
as_mapper(`-`)(.y = 10, .x = 5) (`actual`) not identical to -5 (`expected`).

  `actual`:  5.0
`expected`: -5.0
── Error ('test-reduce.R:193:3'): right variants are retired ───────────────────
Error in `accumulate_right(1:3, c)`: could not find function "accumulate_right"
Backtrace:
    ▆
 1. └─testthat::expect_snapshot(...) at test-reduce.R:193:3
 2.   └─rlang::cnd_signal(state$error)
── Error ('test-reduce.R:202:3'): reduce_right still works ─────────────────────
Error in `reduce_right(c(1, 1), `+`)`: could not find function "reduce_right"
Backtrace:
    ▆
 1. └─testthat::expect_equal(reduce_right(c(1, 1), `+`), 2) at test-reduce.R:202:3
 2.   └─testthat::quasi_label(enquo(object), label, arg = "object")
 3.     └─rlang::eval_bare(expr, quo_get_env(quo))
── Error ('test-reduce.R:210:3'): reduce_right equivalent to reversing input ───
Error in `reduce_right(x, c)`: could not find function "reduce_right"
Backtrace:
    ▆
 1. └─testthat::expect_equal(reduce_right(x, c), c(6, 5, 4, 3, 2, 1)) at test-reduce.R:210:3
 2.   └─testthat::quasi_label(enquo(object), label, arg = "object")
 3.     └─rlang::eval_bare(expr, quo_get_env(quo))
── Error ('test-reduce.R:219:3'): reduce2_right still works ────────────────────
Error in `reduce2_right(x, c("-", "."), paste2)`: could not find function "reduce2_right"
Backtrace:
    ▆
 1. └─testthat::expect_equal(...) at test-reduce.R:219:3
 2.   └─testthat::quasi_label(enquo(object), label, arg = "object")
 3.     └─rlang::eval_bare(expr, quo_get_env(quo))
── Error ('test-reduce.R:231:3'): accumulate_right still works ─────────────────
Error in `accumulate_right(tt, paste, sep = ".")`: could not find function "accumulate_right"
Backtrace:
    ▆
 1. └─testthat::expect_equal(...) at test-reduce.R:231:3
 2.   └─testthat::quasi_label(enquo(object), label, arg = "object")
 3.     └─rlang::eval_bare(expr, quo_get_env(quo))

[ FAIL 14 | WARN 0 | SKIP 123 | PASS 674 ]
Error: Test failures
Execution halted


R version 4.4.3 (2025-02-28) -- "Trophy Case"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> 
> library(testthat)
> library(renv, warn.conflicts = FALSE)
> 
> if (!renv:::renv_tests_supported()) {
+   message("* renv does not support running tests on this platform.")
+   if (!interactive()) quit(status = 0L)
+ }
> 
> if (Sys.info()[["sysname"]] == "Linux") {
+   tools <- asNamespace("tools")
+   if (is.function(tools$R_user_dir)) {
+     cachedir <- tools$R_user_dir("renv", "cache")
+     dir.create(cachedir, recursive = TRUE, showWarnings = FALSE)
+   }
+ }
> 
> test_check("renv")
Starting 2 test processes
[ FAIL 6 | WARN 0 | SKIP 219 | PASS 755 ]

══ Skipped tests (219) ═════════════════════════════════════════════════════════
• empty test (2): 'test-dependencies.R:222:1', 'test-json.R:140:1'
• failing test; mtime sometimes differs? (1): 'test-files.R:130:3'
• GITHUB_PAT is not set (2): 'test-install.R:212:3', 'test-retrieve.R:360:3'
• On CRAN (212): 'test-python.R:15:3', 'test-python.R:29:3',
  'test-python.R:45:3', 'test-python.R:63:3', 'test-python.R:93:3',
  'test-python.R:139:3', 'test-python.R:182:3', 'test-python.R:208:3',
  'test-python.R:236:3', 'test-bioconductor.R:22:3',
  'test-bioconductor.R:60:3', 'test-bioconductor.R:90:3',
  'test-bioconductor.R:120:5', 'test-bioconductor.R:139:3',
  'test-bioconductor.R:175:3', 'test-restore.R:16:3', 'test-restore.R:33:3',
  'test-restore.R:268:3', 'test-restore.R:296:3', 'test-install.R:65:3',
  'test-install.R:112:3', 'test-install.R:157:3', 'test-install.R:201:3',
  'test-install.R:259:3', 'test-install.R:266:3', 'test-install.R:276:3',
  'test-install.R:294:3', 'test-install.R:320:3', 'test-install.R:336:3',
  'test-install.R:347:3', 'test-install.R:404:3', 'test-install.R:427:3',
  'test-install.R:448:3', 'test-install.R:471:3', 'test-install.R:495:3',
  'test-install.R:513:3', 'test-install.R:521:3', 'test-install.R:548:3',
  'test-install.R:577:3', 'test-install.R:613:3', 'test-install.R:646:3',
  'test-install.R:692:3', 'test-install.R:773:3', 'test-retrieve.R:4:3',
  'test-retrieve.R:20:3', 'test-retrieve.R:36:3', 'test-retrieve.R:52:3',
  'test-retrieve.R:70:3', 'test-retrieve.R:85:3', 'test-retrieve.R:104:3',
  'test-retrieve.R:120:3', 'test-retrieve.R:138:3', 'test-retrieve.R:153:3',
  'test-retrieve.R:161:3', 'test-retrieve.R:282:3', 'test-retrieve.R:299:3',
  'test-retrieve.R:315:3', 'test-retrieve.R:354:3', 'test-retrieve.R:367:3',
  'test-remotes.R:33:3', 'test-remotes.R:207:3', 'test-acls.R:4:3',
  'test-activate.R:4:3', 'test-activate.R:29:3', 'test-activate.R:50:3',
  'test-archive.R:51:3', 'test-autoload.R:3:3',
  'test-available-packages.R:3:3', 'test-available-packages.R:23:3',
  'test-available-packages.R:44:3', 'test-available-packages.R:60:3',
  'test-available-packages.R:78:3', 'test-available-packages.R:90:3',
  'test-available-packages.R:111:3', 'test-available-packages.R:132:3',
  'test-available-packages.R:158:3', 'test-snapshot.R:23:3',
  'test-snapshot.R:36:3', 'test-snapshot.R:111:3', 'test-snapshot.R:170:3',
  'test-snapshot.R:321:3', 'test-snapshot.R:358:3', 'test-snapshot.R:364:3',
  'test-snapshot.R:387:3', 'test-snapshot.R:396:3', 'test-snapshot.R:415:3',
  'test-snapshot.R:434:3', 'test-snapshot.R:447:3', 'test-snapshot.R:487:3',
  'test-snapshot.R:520:3', 'test-snapshot.R:540:3', 'test-snapshot.R:556:3',
  'test-snapshot.R:644:3', 'test-snapshot.R:655:3', 'test-snapshot.R:662:3',
  'test-snapshot.R:673:3', 'test-cache.R:3:3', 'test-cache.R:108:3',
  'test-cache.R:127:3', 'test-cache.R:155:3', 'test-cache.R:186:3',
  'test-caution.R:15:3', 'test-cellar.R:3:3', 'test-bootstrap.R:4:3',
  'test-bootstrap.R:18:3', 'test-bootstrap.R:32:3', 'test-bootstrap.R:148:3',
  'test-bootstrap.R:169:3', 'test-bootstrap.R:190:3', 'test-bootstrap.R:220:3',
  'test-bootstrap.R:259:3', 'test-checkout.R:20:3', 'test-config.R:91:3',
  'test-dots.R:10:3', 'test-download.R:3:3', 'test-download.R:60:3',
  'test-download.R:116:3', 'test-download.R:143:3', 'test-download.R:158:3',
  'test-files.R:204:3', 'test-history.R:4:3', 'test-id.R:3:3',
  'test-infrastructure.R:4:3', 'test-dependencies.R:97:3',
  'test-dependencies.R:107:3', 'test-dependencies.R:490:3', 'test-job.R:3:3',
  'test-json.R:54:3', 'test-json.R:64:3', 'test-load.R:25:3',
  'test-load.R:43:3', 'test-load.R:57:3', 'test-init.R:3:3',
  'test-init.R:12:3', 'test-init.R:65:3', 'test-init.R:134:3',
  'test-init.R:164:3', 'test-init.R:190:3', 'test-init.R:223:3',
  'test-init.R:233:3', 'test-init.R:243:3', 'test-init.R:277:3',
  'test-lockfile-read.R:5:3', 'test-lockfile-validate.R:4:3',
  'test-lockfile-validate.R:64:3', 'test-lockfile-validate.R:125:3',
  'test-lockfile-validate.R:180:3', 'test-lockfile-validate.R:234:3',
  'test-lockfile-validate.R:266:3', 'test-lockfile-validate.R:298:3',
  'test-lockfile.R:44:3', 'test-lockfile.R:54:3', 'test-migrate.R:21:3',
  'test-migrate.R:61:3', 'test-modify.R:4:3', 'test-modify.R:16:3',
  'test-mran.R:3:3', 'test-pak.R:4:3', 'test-pak.R:25:3', 'test-ppm.R:3:3',
  'test-ppm.R:15:3', 'test-ppm.R:27:3', 'test-ppm.R:39:3', 'test-ppm.R:51:3',
  'test-ppm.R:78:3', 'test-ppm.R:111:3', 'test-ppm.R:143:3',
  'test-ppm.R:175:3', 'test-ppm.R:208:3', 'test-ppm.R:235:3',
  'test-ppm.R:260:3', 'test-ppm.R:284:3', 'test-ppm.R:311:3',
  'test-ppm.R:336:3', 'test-ppm.R:363:3', 'test-ppm.R:387:3',
  'test-preflight.R:23:3', 'test-profile.R:3:3', 'test-profile.R:34:3',
  'test-profiles.R:3:3', 'test-profiles.R:34:3', 'test-lock.R:152:3',
  'test-r.R:3:3', 'test-r.R:48:3', 'test-reload.R:4:3', 'test-repair.R:4:3',
  'test-repair.R:27:3', 'test-repair.R:55:3', 'test-repos.R:59:3',
  'test-sandbox.R:116:3', 'test-socket.R:4:3', 'test-sysreqs.R:4:3',
  'test-system.R:3:3', 'test-update.R:4:3', 'test-update.R:20:3',
  'test-update.R:52:3', 'test-update.R:94:3', 'test-update.R:109:3',
  'test-upgrade.R:4:3', 'test-use.R:4:3', 'test-use.R:30:3',
  'test-utils.R:159:3', 'test-vendor.R:8:3', 'test-watchdog.R:4:3',
  'test-watchdog.R:39:3', 'test-status.R:4:3', 'test-status.R:20:3',
  'test-status.R:33:3', 'test-status.R:46:3', 'test-status.R:57:3',
  'test-status.R:74:3', 'test-status.R:86:3'
• renv_platform_macos() is not TRUE (1): 'test-retrieve.R:238:3'
• renv_platform_windows() is not TRUE (1): 'test-install.R:227:3'

══ Failed tests ════════════════════════════════════════════════════════════════
── Failure ('test-restore.R:6:3'): library permissions are validated before restore ──
renv_install_preflight_permissions(inaccessible) is not FALSE

`actual`:   TRUE 
`expected`: FALSE
── Failure ('test-cache.R:86:3'): package installation does not fail with non-writable cache ──
type == "symlink" is not FALSE

`actual`:   TRUE 
`expected`: FALSE
── Error ('test-caution.R:3:3'): bulletin() creates bulleted list with optional postamble ──
Error in `bulletin("preamble", letters[1:3], postamble = "after")`: could not find function "bulletin"
Backtrace:
    ▆
 1. └─renv:::expect_snapshot(...) at test-caution.R:3:3
 2.   └─testthat::expect_snapshot(...) at renv-tests/testthat/helper-snapshot.R:10:3
 3.     └─rlang::cnd_signal(state$error)
── Error ('test-caution.R:10:3'): bulletin() doesn't show pre/post amble if no values ──
Error in `bulletin("before", character(), "after")`: could not find function "bulletin"
Backtrace:
    ▆
 1. └─testthat::expect_silent(bulletin("before", character(), "after")) at test-caution.R:10:3
 2.   └─testthat:::quasi_capture(enquo(object), NULL, evaluate_promise)
 3.     ├─testthat (local) .capture(...)
 4.     │ ├─withr::with_output_sink(...)
 5.     │ │ └─base::force(code)
 6.     │ ├─base::withCallingHandlers(...)
 7.     │ └─base::withVisible(code)
 8.     └─rlang::eval_bare(quo_get_expr(.quo), quo_get_env(.quo))
── Failure ('test-dependencies.R:386:3'): dependencies() doesn't barf on files without read permission ──
`renv_file_read("secrets/secrets.R")` did not throw the expected error.
── Failure ('test-dependencies.R:388:3'): dependencies() doesn't barf on files without read permission ──
NROW(deps) == 0L is not TRUE

`actual`:   FALSE
`expected`: TRUE 

[ FAIL 6 | WARN 0 | SKIP 219 | PASS 755 ]
Error: Test failures
Execution halted

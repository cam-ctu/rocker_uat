
R version 4.4.3 (2025-02-28) -- "Trophy Case"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> ## This runs testme test script incl/testme/test-as.cluster.R
> ## Don't edit - it was autogenerated by inst/testme/deploy.R
> parallelly:::testme("as.cluster")
Test ‘as.cluster’ ...
Sourcing 7 prologue scripts ...
01/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/001.load.R’
02/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/002.record-state.R’
03/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/030.imports.R’
04/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/050.utils.R’
05/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/090.context.R’
06/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/090.options.R’
07/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/091.envvars.R’
Sourcing 7 prologue scripts ... done
Running test script: ‘/usr/local/lib/R/site-library/parallelly/testme/test-as.cluster.R’

> library(parallelly)

> stopCluster <- parallel::stopCluster

> message("*** cluster operations ...")
*** cluster operations ...

> local({
+     cl0 <- makeClusterPSOCK(1)
+     on.exit(stopCluster(cl0))
+     cl <- cl0
+     print(cl)
+     message("*** cluster operations - as. ..." ... [TRUNCATED] 
[11:37:31.118] [local output] makeClusterPSOCK() ...
[11:37:31.154] |  [local output] Workers: [n = 1] ‘localhost’
[11:37:31.155] |  [local output] Base port: 11892
[11:37:31.155] |  [local output] Getting setup options for 1 cluster nodes ...
[11:37:31.155] |  [local output] Node #1 of 1 ...
[11:37:31.156] |  [local output] localMachine=TRUE => revtunnel=FALSE

[11:37:31.157] |  Testing if worker's PID can be inferred: ‘'/usr/local/lib/R/bin/Rscript' -e 'try(suppressWarnings(cat(Sys.getpid(),file="/tmp/RtmpLuhsiz/worker.rank=1.parallelly.parent=103866.195ba56a196da.pid")),silent=TRUE)' -e 'file.exists("/tmp/RtmpLuhsiz/worker.rank=1.parallelly.parent=103866.195ba56a196da.pid")'’
[11:37:31.329] |  - Possible to infer worker's PID: TRUE
[11:37:31.329] |  [local output] Rscript port: 11892

[11:37:31.329] |  [local output] Getting setup options for 1 cluster nodes ... done
[11:37:31.329] |  [local output] Parallel setup requested for some PSOCK nodes
[11:37:31.330] |  [local output] Setting up PSOCK nodes in parallel
[11:37:31.330] |  List of 36
[11:37:31.330] |   $ worker          : chr "localhost"
[11:37:31.330] |    ..- attr(*, "localhost")= logi TRUE
[11:37:31.330] |   $ master          : chr "localhost"
[11:37:31.330] |   $ port            : int 11892
[11:37:31.330] |   $ connectTimeout  : num 120
[11:37:31.330] |   $ timeout         : num 2592000
[11:37:31.330] |   $ rscript         : chr "'/usr/local/lib/R/bin/Rscript'"
[11:37:31.330] |   $ homogeneous     : logi TRUE
[11:37:31.330] |   $ rscript_args    : chr "--default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppressWarnings(cat(Sys.getpid(),fi"| __truncated__
[11:37:31.330] |   $ rscript_envs    : NULL
[11:37:31.330] |   $ rscript_libs    : NULL
[11:37:31.330] |   $ rscript_startup : NULL
[11:37:31.330] |   $ rscript_sh      : chr [1:2] "sh" "sh"
[11:37:31.330] |   $ default_packages: chr [1:6] "datasets" "utils" "grDevices" "graphics" ...
[11:37:31.330] |   $ methods         : logi TRUE
[11:37:31.330] |   $ socketOptions   : chr "no-delay"
[11:37:31.330] |   $ useXDR          : logi FALSE
[11:37:31.330] |   $ outfile         : chr "/dev/null"
[11:37:31.330] |   $ renice          : int NA
[11:37:31.330] |   $ rshcmd          : NULL
[11:37:31.330] |   $ user            : chr(0) 
[11:37:31.330] |   $ revtunnel       : logi FALSE
[11:37:31.330] |   $ rshlogfile      : NULL
[11:37:31.330] |   $ rshopts         : chr(0) 
[11:37:31.330] |   $ rank            : int 1
[11:37:31.330] |   $ manual          : logi FALSE
[11:37:31.330] |   $ dryrun          : logi FALSE
[11:37:31.330] |   $ quiet           : logi FALSE
[11:37:31.330] |   $ setup_strategy  : chr "parallel"
[11:37:31.330] |   $ local_cmd       : chr "'/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppr"| __truncated__
[11:37:31.330] |   $ pidfile         : chr "/tmp/RtmpLuhsiz/worker.rank=1.parallelly.parent=103866.195ba56a196da.pid"
[11:37:31.330] |   $ rshcmd_label    : NULL
[11:37:31.330] |   $ rsh_call        : NULL
[11:37:31.330] |   $ cmd             : chr "'/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppr"| __truncated__
[11:37:31.330] |   $ localMachine    : logi TRUE
[11:37:31.330] |   $ make_fcn        :function (worker = getOption2("parallelly.localhost.hostname", "localhost"), 
[11:37:31.330] |      master = NULL, port, connectTimeout = getOption2("parallelly.makeNodePSOCK.connectTimeout", 
[11:37:31.330] |          2 * 60), timeout = getOption2("parallelly.makeNodePSOCK.timeout", 
[11:37:31.330] |          30 * 24 * 60 * 60), rscript = NULL, homogeneous = NULL, rscript_args = NULL, 
[11:37:31.330] |      rscript_envs = NULL, rscript_libs = NULL, rscript_startup = NULL, rscript_sh = c("auto", 
[11:37:31.330] |          "cmd", "sh", "none"), default_packages = c("datasets", "utils", 
[11:37:31.330] |          "grDevices", "graphics", "stats", if (methods) "methods"), methods = TRUE, 
[11:37:31.330] |      socketOptions = getOption2("parallelly.makeNodePSOCK.socketOptions", 
[11:37:31.330] |          "no-delay"), useXDR = getOption2("parallelly.makeNodePSOCK.useXDR", 
[11:37:31.330] |          FALSE), outfile = "/dev/null", renice = NA_integer_, rshcmd = getOption2("parallelly.makeNodePSOCK.rshcmd", 
[11:37:31.330] |          NULL), user = NULL, revtunnel = NA, rshlogfile = NULL, rshopts = getOption2("parallelly.makeNodePSOCK.rshopts", 
[11:37:31.330] |          NULL), rank = 1L, manual = FALSE, dryrun = FALSE, quiet = FALSE, 
[11:37:31.330] |      setup_strategy = getOption2("parallelly.makeNodePSOCK.setup_strategy", 
[11:37:31.330] |          "parallel"), action = c("launch", "options"), verbose = FALSE)  
[11:37:31.330] |   $ arguments       :List of 28
[11:37:31.330] |    ..$ worker          : chr "localhost"
[11:37:31.330] |    ..$ master          : NULL
[11:37:31.330] |    ..$ port            : int 11892
[11:37:31.330] |    ..$ connectTimeout  : num 120
[11:37:31.330] |    ..$ timeout         : num 2592000
[11:37:31.330] |    ..$ rscript         : NULL
[11:37:31.330] |    ..$ homogeneous     : NULL
[11:37:31.330] |    ..$ rscript_args    : NULL
[11:37:31.330] |    ..$ rscript_envs    : NULL
[11:37:31.330] |    ..$ rscript_libs    : NULL
[11:37:31.330] |    ..$ rscript_startup : NULL
[11:37:31.330] |    ..$ rscript_sh      : chr "auto"
[11:37:31.330] |    ..$ default_packages: chr [1:6] "datasets" "utils" "grDevices" "graphics" ...
[11:37:31.330] |    ..$ methods         : logi TRUE
[11:37:31.330] |    ..$ socketOptions   : chr "no-delay"
[11:37:31.330] |    ..$ useXDR          : logi FALSE
[11:37:31.330] |    ..$ outfile         : chr "/dev/null"
[11:37:31.330] |    ..$ renice          : int NA
[11:37:31.330] |    ..$ rshcmd          : NULL
[11:37:31.330] |    ..$ user            : NULL
[11:37:31.330] |    ..$ revtunnel       : logi NA
[11:37:31.330] |    ..$ rshlogfile      : NULL
[11:37:31.330] |    ..$ rshopts         : NULL
[11:37:31.330] |    ..$ rank            : int 1
[11:37:31.330] |    ..$ manual          : logi FALSE
[11:37:31.330] |    ..$ dryrun          : logi FALSE
[11:37:31.330] |    ..$ quiet           : logi FALSE
[11:37:31.330] |    ..$ setup_strategy  : chr "parallel"
[11:37:31.330] |   - attr(*, "class")= chr [1:2] "makeNodePSOCKOptions" "makeNodeOptions"
[11:37:31.349] |  [local output] System call to launch all workers:
[11:37:31.349] |  [local output] '/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppressWarnings(cat(Sys.getpid(),file="/tmp/RtmpLuhsiz/worker.rank=1.parallelly.parent=103866.195ba56a196da.pid")),silent=TRUE)' -e 'options(socketOptions="no-delay")' -e 'workRSOCK<-tryCatch(parallel:::.workRSOCK,error=function(e)parallel:::.slaveRSOCK);workRSOCK()' MASTER=localhost PORT=11892 OUT=/dev/null TIMEOUT=2592000 XDR=FALSE SETUPTIMEOUT=120 SETUPSTRATEGY=parallel
[11:37:31.349] |  [local output] Starting PSOCK main server
[11:37:31.355] |  [local output] Workers launched
[11:37:31.355] |  [local output] Waiting for workers to connect back ...
[11:37:31.355] |  :  [local output] 0 workers out of 1 ready
[11:37:31.533] |  :  [local output] 0 workers out of 1 ready
[11:37:31.533] |  :  [local output] 1 workers out of 1 ready
[11:37:31.533] |  [local output] Waiting for workers to connect back ... done
[11:37:31.533] |  [local output] Launching of 1 workers completed
[11:37:31.533] |  [local output] Number of nodes in cluster: 1
[11:37:31.533] |  [local output] Collecting session information from 1 workers
[11:37:31.534] |  :  [local output] Worker #1 of 1
[11:37:31.534] |  [local output] Collecting session information from 1 workers
[11:37:31.535] [local output] makeClusterPSOCK() ... done
Socket cluster with 1 nodes where 1 node is on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
*** cluster operations - as.cluster() ...
Socket cluster with 1 nodes where 1 node is on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
RichSOCKnode of a socket cluster on local host 'localhost' with pid 103917 (R version 4.4.3 (2025-02-28), x86_64-pc-linux-gnu) using socket connection #4 ('<-localhost:11892')
RichSOCKnode of a socket cluster on local host 'localhost' with pid 103917 (R version 4.4.3 (2025-02-28), x86_64-pc-linux-gnu) using socket connection #4 ('<-localhost:11892')
Socket cluster with 1 nodes where 1 node is on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
Warning: The combined cluster contains 1 duplicated nodes
Socket cluster with 2 nodes where 2 nodes are on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
*** cluster operations - as.cluster() ... DONE
*** cluster operations - c(...) ...
[11:37:31.541] [local output] makeClusterPSOCK() ...
[11:37:31.541] |  [local output] Workers: [n = 1] ‘localhost’
[11:37:31.542] |  [local output] Base port: 11413
[11:37:31.542] |  [local output] Getting setup options for 1 cluster nodes ...
[11:37:31.542] |  [local output] Node #1 of 1 ...
[11:37:31.542] |  [local output] localMachine=TRUE => revtunnel=FALSE

[11:37:31.543] |  [local output] Rscript port: 11413

[11:37:31.543] |  [local output] Getting setup options for 1 cluster nodes ... done
[11:37:31.543] |  [local output] Parallel setup requested for some PSOCK nodes
[11:37:31.544] |  [local output] Setting up PSOCK nodes in parallel
[11:37:31.544] |  List of 36
[11:37:31.544] |   $ worker          : chr "localhost"
[11:37:31.544] |    ..- attr(*, "localhost")= logi TRUE
[11:37:31.544] |   $ master          : chr "localhost"
[11:37:31.544] |   $ port            : int 11413
[11:37:31.544] |   $ connectTimeout  : num 120
[11:37:31.544] |   $ timeout         : num 2592000
[11:37:31.544] |   $ rscript         : chr "'/usr/local/lib/R/bin/Rscript'"
[11:37:31.544] |   $ homogeneous     : logi TRUE
[11:37:31.544] |   $ rscript_args    : chr "--default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppressWarnings(cat(Sys.getpid(),fi"| __truncated__
[11:37:31.544] |   $ rscript_envs    : NULL
[11:37:31.544] |   $ rscript_libs    : NULL
[11:37:31.544] |   $ rscript_startup : NULL
[11:37:31.544] |   $ rscript_sh      : chr [1:2] "sh" "sh"
[11:37:31.544] |   $ default_packages: chr [1:6] "datasets" "utils" "grDevices" "graphics" ...
[11:37:31.544] |   $ methods         : logi TRUE
[11:37:31.544] |   $ socketOptions   : chr "no-delay"
[11:37:31.544] |   $ useXDR          : logi FALSE
[11:37:31.544] |   $ outfile         : chr "/dev/null"
[11:37:31.544] |   $ renice          : int NA
[11:37:31.544] |   $ rshcmd          : NULL
[11:37:31.544] |   $ user            : chr(0) 
[11:37:31.544] |   $ revtunnel       : logi FALSE
[11:37:31.544] |   $ rshlogfile      : NULL
[11:37:31.544] |   $ rshopts         : chr(0) 
[11:37:31.544] |   $ rank            : int 1
[11:37:31.544] |   $ manual          : logi FALSE
[11:37:31.544] |   $ dryrun          : logi FALSE
[11:37:31.544] |   $ quiet           : logi FALSE
[11:37:31.544] |   $ setup_strategy  : chr "parallel"
[11:37:31.544] |   $ local_cmd       : chr "'/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppr"| __truncated__
[11:37:31.544] |   $ pidfile         : chr "/tmp/RtmpLuhsiz/worker.rank=1.parallelly.parent=103866.195ba4bb3a8d1.pid"
[11:37:31.544] |   $ rshcmd_label    : NULL
[11:37:31.544] |   $ rsh_call        : NULL
[11:37:31.544] |   $ cmd             : chr "'/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppr"| __truncated__
[11:37:31.544] |   $ localMachine    : logi TRUE
[11:37:31.544] |   $ make_fcn        :function (worker = getOption2("parallelly.localhost.hostname", "localhost"), 
[11:37:31.544] |      master = NULL, port, connectTimeout = getOption2("parallelly.makeNodePSOCK.connectTimeout", 
[11:37:31.544] |          2 * 60), timeout = getOption2("parallelly.makeNodePSOCK.timeout", 
[11:37:31.544] |          30 * 24 * 60 * 60), rscript = NULL, homogeneous = NULL, rscript_args = NULL, 
[11:37:31.544] |      rscript_envs = NULL, rscript_libs = NULL, rscript_startup = NULL, rscript_sh = c("auto", 
[11:37:31.544] |          "cmd", "sh", "none"), default_packages = c("datasets", "utils", 
[11:37:31.544] |          "grDevices", "graphics", "stats", if (methods) "methods"), methods = TRUE, 
[11:37:31.544] |      socketOptions = getOption2("parallelly.makeNodePSOCK.socketOptions", 
[11:37:31.544] |          "no-delay"), useXDR = getOption2("parallelly.makeNodePSOCK.useXDR", 
[11:37:31.544] |          FALSE), outfile = "/dev/null", renice = NA_integer_, rshcmd = getOption2("parallelly.makeNodePSOCK.rshcmd", 
[11:37:31.544] |          NULL), user = NULL, revtunnel = NA, rshlogfile = NULL, rshopts = getOption2("parallelly.makeNodePSOCK.rshopts", 
[11:37:31.544] |          NULL), rank = 1L, manual = FALSE, dryrun = FALSE, quiet = FALSE, 
[11:37:31.544] |      setup_strategy = getOption2("parallelly.makeNodePSOCK.setup_strategy", 
[11:37:31.544] |          "parallel"), action = c("launch", "options"), verbose = FALSE)  
[11:37:31.544] |   $ arguments       :List of 28
[11:37:31.544] |    ..$ worker          : chr "localhost"
[11:37:31.544] |    ..$ master          : NULL
[11:37:31.544] |    ..$ port            : int 11413
[11:37:31.544] |    ..$ connectTimeout  : num 120
[11:37:31.544] |    ..$ timeout         : num 2592000
[11:37:31.544] |    ..$ rscript         : NULL
[11:37:31.544] |    ..$ homogeneous     : NULL
[11:37:31.544] |    ..$ rscript_args    : NULL
[11:37:31.544] |    ..$ rscript_envs    : NULL
[11:37:31.544] |    ..$ rscript_libs    : NULL
[11:37:31.544] |    ..$ rscript_startup : NULL
[11:37:31.544] |    ..$ rscript_sh      : chr "auto"
[11:37:31.544] |    ..$ default_packages: chr [1:6] "datasets" "utils" "grDevices" "graphics" ...
[11:37:31.544] |    ..$ methods         : logi TRUE
[11:37:31.544] |    ..$ socketOptions   : chr "no-delay"
[11:37:31.544] |    ..$ useXDR          : logi FALSE
[11:37:31.544] |    ..$ outfile         : chr "/dev/null"
[11:37:31.544] |    ..$ renice          : int NA
[11:37:31.544] |    ..$ rshcmd          : NULL
[11:37:31.544] |    ..$ user            : NULL
[11:37:31.544] |    ..$ revtunnel       : logi NA
[11:37:31.544] |    ..$ rshlogfile      : NULL
[11:37:31.544] |    ..$ rshopts         : NULL
[11:37:31.544] |    ..$ rank            : int 1
[11:37:31.544] |    ..$ manual          : logi FALSE
[11:37:31.544] |    ..$ dryrun          : logi FALSE
[11:37:31.544] |    ..$ quiet           : logi FALSE
[11:37:31.544] |    ..$ setup_strategy  : chr "parallel"
[11:37:31.544] |   - attr(*, "class")= chr [1:2] "makeNodePSOCKOptions" "makeNodeOptions"
[11:37:31.562] |  [local output] System call to launch all workers:
[11:37:31.562] |  [local output] '/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppressWarnings(cat(Sys.getpid(),file="/tmp/RtmpLuhsiz/worker.rank=1.parallelly.parent=103866.195ba4bb3a8d1.pid")),silent=TRUE)' -e 'options(socketOptions="no-delay")' -e 'workRSOCK<-tryCatch(parallel:::.workRSOCK,error=function(e)parallel:::.slaveRSOCK);workRSOCK()' MASTER=localhost PORT=11413 OUT=/dev/null TIMEOUT=2592000 XDR=FALSE SETUPTIMEOUT=120 SETUPSTRATEGY=parallel
[11:37:31.562] |  [local output] Starting PSOCK main server
[11:37:31.563] |  [local output] Workers launched
[11:37:31.563] |  [local output] Waiting for workers to connect back ...
[11:37:31.563] |  :  [local output] 0 workers out of 1 ready
[11:37:31.740] |  :  [local output] 0 workers out of 1 ready
[11:37:31.740] |  :  [local output] 1 workers out of 1 ready
[11:37:31.740] |  [local output] Waiting for workers to connect back ... done
[11:37:31.740] |  [local output] Launching of 1 workers completed
[11:37:31.740] |  [local output] Number of nodes in cluster: 1
[11:37:31.740] |  [local output] Collecting session information from 1 workers
[11:37:31.741] |  :  [local output] Worker #1 of 1
[11:37:31.741] |  [local output] Collecting session information from 1 workers
[11:37:31.741] [local output] makeClusterPSOCK() ... done
Socket cluster with 1 nodes where 1 node is on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
Socket cluster with 2 nodes where 2 nodes are on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
*** cluster operations - c(...) ... DONE

> message("*** cluster operations - makeClusterPSOCK(remotes) ...")
*** cluster operations - makeClusterPSOCK(remotes) ...

> remotes <- Sys.getenv("R_PARALLELLY_TESTS_REMOTES", 
+     "")

> remotes <- gsub(" ", "", unlist(strsplit(remotes, 
+     split = ",")))

> remotes <- remotes[nzchar(remotes)]

> if (length(remotes) > 0) {
+     message("Remotes: ", paste(sQuote(remotes), collapse = ", "))
+     local({
+         cl <- makeClusterPSOCK(remote .... [TRUNCATED] 

> message("*** cluster operations - makeClusterPSOCK(remotes) ... DONE")
*** cluster operations - makeClusterPSOCK(remotes) ... DONE

> message("*** cluster operations ... DONE")
*** cluster operations ... DONE
Sourcing 4 epilogue scripts ...
01/04 epilogue script ‘/usr/local/lib/R/site-library/parallelly/testme/_epilogue/002.undo-state.R’
02/04 epilogue script ‘/usr/local/lib/R/site-library/parallelly/testme/_epilogue/090.gc.R’
03/04 epilogue script ‘/usr/local/lib/R/site-library/parallelly/testme/_epilogue/099.session_info.R’
04/04 epilogue script ‘/usr/local/lib/R/site-library/parallelly/testme/_epilogue/999.detritus.R’
Looking for detritus files generated by test ‘as.cluster’:
Skipping, because path appears not to be an 'R CMD check' folder: ‘/tmp’
Sourcing 4 epilogue scripts ... done
Test time: user.self=0.1s, sys.self=0.007s, elapsed=0.6s, user.child=0.2s, sys.child=0.3s
Test ‘as.cluster’ ... success
> 

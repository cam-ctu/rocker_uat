
R version 4.4.3 (2025-02-28) -- "Trophy Case"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> ## This runs testme test script incl/testme/test-as.cluster.R
> ## Don't edit - it was autogenerated by inst/testme/deploy.R
> parallelly:::testme("as.cluster")
Test ‘as.cluster’ ...
Sourcing 7 prologue scripts ...
01/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/001.load.R’
02/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/002.record-state.R’
03/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/030.imports.R’
04/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/050.utils.R’
05/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/090.context.R’
06/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/090.options.R’
07/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/091.envvars.R’
Sourcing 7 prologue scripts ... done
Running test script: ‘/usr/local/lib/R/site-library/parallelly/testme/test-as.cluster.R’

> library(parallelly)

> stopCluster <- parallel::stopCluster

> message("*** cluster operations ...")
*** cluster operations ...

> local({
+     cl0 <- makeClusterPSOCK(1)
+     on.exit(stopCluster(cl0))
+     cl <- cl0
+     print(cl)
+     message("*** cluster operations - as. ..." ... [TRUNCATED] 
[10:57:01.016] [local output] makeClusterPSOCK() ...
[10:57:01.058] |  [local output] Workers: [n = 1] ‘localhost’
[10:57:01.059] |  [local output] Base port: 11809
[10:57:01.059] |  [local output] Getting setup options for 1 cluster nodes ...
[10:57:01.059] |  [local output] Node #1 of 1 ...
[10:57:01.059] |  [local output] localMachine=TRUE => revtunnel=FALSE

[10:57:01.060] |  Testing if worker's PID can be inferred: ‘'/usr/local/lib/R/bin/Rscript' -e 'try(suppressWarnings(cat(Sys.getpid(),file="/tmp/RtmpWzyOa0/worker.rank=1.parallelly.parent=105158.19ac66adfaf79.pid")),silent=TRUE)' -e 'file.exists("/tmp/RtmpWzyOa0/worker.rank=1.parallelly.parent=105158.19ac66adfaf79.pid")'’
[10:57:01.237] |  - Possible to infer worker's PID: TRUE
[10:57:01.237] |  [local output] Rscript port: 11809

[10:57:01.237] |  [local output] Getting setup options for 1 cluster nodes ... done
[10:57:01.238] |  [local output] Parallel setup requested for some PSOCK nodes
[10:57:01.238] |  [local output] Setting up PSOCK nodes in parallel
[10:57:01.238] |  List of 36
[10:57:01.238] |   $ worker          : chr "localhost"
[10:57:01.238] |    ..- attr(*, "localhost")= logi TRUE
[10:57:01.238] |   $ master          : chr "localhost"
[10:57:01.238] |   $ port            : int 11809
[10:57:01.238] |   $ connectTimeout  : num 120
[10:57:01.238] |   $ timeout         : num 2592000
[10:57:01.238] |   $ rscript         : chr "'/usr/local/lib/R/bin/Rscript'"
[10:57:01.238] |   $ homogeneous     : logi TRUE
[10:57:01.238] |   $ rscript_args    : chr "--default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppressWarnings(cat(Sys.getpid(),fi"| __truncated__
[10:57:01.238] |   $ rscript_envs    : NULL
[10:57:01.238] |   $ rscript_libs    : NULL
[10:57:01.238] |   $ rscript_startup : NULL
[10:57:01.238] |   $ rscript_sh      : chr [1:2] "sh" "sh"
[10:57:01.238] |   $ default_packages: chr [1:6] "datasets" "utils" "grDevices" "graphics" ...
[10:57:01.238] |   $ methods         : logi TRUE
[10:57:01.238] |   $ socketOptions   : chr "no-delay"
[10:57:01.238] |   $ useXDR          : logi FALSE
[10:57:01.238] |   $ outfile         : chr "/dev/null"
[10:57:01.238] |   $ renice          : int NA
[10:57:01.238] |   $ rshcmd          : NULL
[10:57:01.238] |   $ user            : chr(0) 
[10:57:01.238] |   $ revtunnel       : logi FALSE
[10:57:01.238] |   $ rshlogfile      : NULL
[10:57:01.238] |   $ rshopts         : chr(0) 
[10:57:01.238] |   $ rank            : int 1
[10:57:01.238] |   $ manual          : logi FALSE
[10:57:01.238] |   $ dryrun          : logi FALSE
[10:57:01.238] |   $ quiet           : logi FALSE
[10:57:01.238] |   $ setup_strategy  : chr "parallel"
[10:57:01.238] |   $ local_cmd       : chr "'/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppr"| __truncated__
[10:57:01.238] |   $ pidfile         : chr "/tmp/RtmpWzyOa0/worker.rank=1.parallelly.parent=105158.19ac66adfaf79.pid"
[10:57:01.238] |   $ rshcmd_label    : NULL
[10:57:01.238] |   $ rsh_call        : NULL
[10:57:01.238] |   $ cmd             : chr "'/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppr"| __truncated__
[10:57:01.238] |   $ localMachine    : logi TRUE
[10:57:01.238] |   $ make_fcn        :function (worker = getOption2("parallelly.localhost.hostname", "localhost"), 
[10:57:01.238] |      master = NULL, port, connectTimeout = getOption2("parallelly.makeNodePSOCK.connectTimeout", 
[10:57:01.238] |          2 * 60), timeout = getOption2("parallelly.makeNodePSOCK.timeout", 
[10:57:01.238] |          30 * 24 * 60 * 60), rscript = NULL, homogeneous = NULL, rscript_args = NULL, 
[10:57:01.238] |      rscript_envs = NULL, rscript_libs = NULL, rscript_startup = NULL, rscript_sh = c("auto", 
[10:57:01.238] |          "cmd", "sh", "none"), default_packages = c("datasets", "utils", 
[10:57:01.238] |          "grDevices", "graphics", "stats", if (methods) "methods"), methods = TRUE, 
[10:57:01.238] |      socketOptions = getOption2("parallelly.makeNodePSOCK.socketOptions", 
[10:57:01.238] |          "no-delay"), useXDR = getOption2("parallelly.makeNodePSOCK.useXDR", 
[10:57:01.238] |          FALSE), outfile = "/dev/null", renice = NA_integer_, rshcmd = getOption2("parallelly.makeNodePSOCK.rshcmd", 
[10:57:01.238] |          NULL), user = NULL, revtunnel = NA, rshlogfile = NULL, rshopts = getOption2("parallelly.makeNodePSOCK.rshopts", 
[10:57:01.238] |          NULL), rank = 1L, manual = FALSE, dryrun = FALSE, quiet = FALSE, 
[10:57:01.238] |      setup_strategy = getOption2("parallelly.makeNodePSOCK.setup_strategy", 
[10:57:01.238] |          "parallel"), action = c("launch", "options"), verbose = FALSE)  
[10:57:01.238] |   $ arguments       :List of 28
[10:57:01.238] |    ..$ worker          : chr "localhost"
[10:57:01.238] |    ..$ master          : NULL
[10:57:01.238] |    ..$ port            : int 11809
[10:57:01.238] |    ..$ connectTimeout  : num 120
[10:57:01.238] |    ..$ timeout         : num 2592000
[10:57:01.238] |    ..$ rscript         : NULL
[10:57:01.238] |    ..$ homogeneous     : NULL
[10:57:01.238] |    ..$ rscript_args    : NULL
[10:57:01.238] |    ..$ rscript_envs    : NULL
[10:57:01.238] |    ..$ rscript_libs    : NULL
[10:57:01.238] |    ..$ rscript_startup : NULL
[10:57:01.238] |    ..$ rscript_sh      : chr "auto"
[10:57:01.238] |    ..$ default_packages: chr [1:6] "datasets" "utils" "grDevices" "graphics" ...
[10:57:01.238] |    ..$ methods         : logi TRUE
[10:57:01.238] |    ..$ socketOptions   : chr "no-delay"
[10:57:01.238] |    ..$ useXDR          : logi FALSE
[10:57:01.238] |    ..$ outfile         : chr "/dev/null"
[10:57:01.238] |    ..$ renice          : int NA
[10:57:01.238] |    ..$ rshcmd          : NULL
[10:57:01.238] |    ..$ user            : NULL
[10:57:01.238] |    ..$ revtunnel       : logi NA
[10:57:01.238] |    ..$ rshlogfile      : NULL
[10:57:01.238] |    ..$ rshopts         : NULL
[10:57:01.238] |    ..$ rank            : int 1
[10:57:01.238] |    ..$ manual          : logi FALSE
[10:57:01.238] |    ..$ dryrun          : logi FALSE
[10:57:01.238] |    ..$ quiet           : logi FALSE
[10:57:01.238] |    ..$ setup_strategy  : chr "parallel"
[10:57:01.238] |   - attr(*, "class")= chr [1:2] "makeNodePSOCKOptions" "makeNodeOptions"
[10:57:01.257] |  [local output] System call to launch all workers:
[10:57:01.257] |  [local output] '/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppressWarnings(cat(Sys.getpid(),file="/tmp/RtmpWzyOa0/worker.rank=1.parallelly.parent=105158.19ac66adfaf79.pid")),silent=TRUE)' -e 'options(socketOptions="no-delay")' -e 'workRSOCK<-tryCatch(parallel:::.workRSOCK,error=function(e)parallel:::.slaveRSOCK);workRSOCK()' MASTER=localhost PORT=11809 OUT=/dev/null TIMEOUT=2592000 XDR=FALSE SETUPTIMEOUT=120 SETUPSTRATEGY=parallel
[10:57:01.257] |  [local output] Starting PSOCK main server
[10:57:01.263] |  [local output] Workers launched
[10:57:01.263] |  [local output] Waiting for workers to connect back ...
[10:57:01.263] |  :  [local output] 0 workers out of 1 ready
[10:57:01.442] |  :  [local output] 0 workers out of 1 ready
[10:57:01.443] |  :  [local output] 1 workers out of 1 ready
[10:57:01.443] |  [local output] Waiting for workers to connect back ... done
[10:57:01.443] |  [local output] Launching of 1 workers completed
[10:57:01.443] |  [local output] Number of nodes in cluster: 1
[10:57:01.443] |  [local output] Collecting session information from 1 workers
[10:57:01.444] |  :  [local output] Worker #1 of 1
[10:57:01.444] |  [local output] Collecting session information from 1 workers
[10:57:01.444] [local output] makeClusterPSOCK() ... done
Socket cluster with 1 nodes where 1 node is on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
*** cluster operations - as.cluster() ...
Socket cluster with 1 nodes where 1 node is on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
RichSOCKnode of a socket cluster on local host 'localhost' with pid 105209 (R version 4.4.3 (2025-02-28), x86_64-pc-linux-gnu) using socket connection #4 ('<-localhost:11809')
RichSOCKnode of a socket cluster on local host 'localhost' with pid 105209 (R version 4.4.3 (2025-02-28), x86_64-pc-linux-gnu) using socket connection #4 ('<-localhost:11809')
Socket cluster with 1 nodes where 1 node is on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
Warning: The combined cluster contains 1 duplicated nodes
Socket cluster with 2 nodes where 2 nodes are on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
*** cluster operations - as.cluster() ... DONE
*** cluster operations - c(...) ...
[10:57:01.451] [local output] makeClusterPSOCK() ...
[10:57:01.451] |  [local output] Workers: [n = 1] ‘localhost’
[10:57:01.452] |  [local output] Base port: 11683
[10:57:01.452] |  [local output] Getting setup options for 1 cluster nodes ...
[10:57:01.452] |  [local output] Node #1 of 1 ...
[10:57:01.452] |  [local output] localMachine=TRUE => revtunnel=FALSE

[10:57:01.453] |  [local output] Rscript port: 11683

[10:57:01.453] |  [local output] Getting setup options for 1 cluster nodes ... done
[10:57:01.453] |  [local output] Parallel setup requested for some PSOCK nodes
[10:57:01.454] |  [local output] Setting up PSOCK nodes in parallel
[10:57:01.454] |  List of 36
[10:57:01.454] |   $ worker          : chr "localhost"
[10:57:01.454] |    ..- attr(*, "localhost")= logi TRUE
[10:57:01.454] |   $ master          : chr "localhost"
[10:57:01.454] |   $ port            : int 11683
[10:57:01.454] |   $ connectTimeout  : num 120
[10:57:01.454] |   $ timeout         : num 2592000
[10:57:01.454] |   $ rscript         : chr "'/usr/local/lib/R/bin/Rscript'"
[10:57:01.454] |   $ homogeneous     : logi TRUE
[10:57:01.454] |   $ rscript_args    : chr "--default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppressWarnings(cat(Sys.getpid(),fi"| __truncated__
[10:57:01.454] |   $ rscript_envs    : NULL
[10:57:01.454] |   $ rscript_libs    : NULL
[10:57:01.454] |   $ rscript_startup : NULL
[10:57:01.454] |   $ rscript_sh      : chr [1:2] "sh" "sh"
[10:57:01.454] |   $ default_packages: chr [1:6] "datasets" "utils" "grDevices" "graphics" ...
[10:57:01.454] |   $ methods         : logi TRUE
[10:57:01.454] |   $ socketOptions   : chr "no-delay"
[10:57:01.454] |   $ useXDR          : logi FALSE
[10:57:01.454] |   $ outfile         : chr "/dev/null"
[10:57:01.454] |   $ renice          : int NA
[10:57:01.454] |   $ rshcmd          : NULL
[10:57:01.454] |   $ user            : chr(0) 
[10:57:01.454] |   $ revtunnel       : logi FALSE
[10:57:01.454] |   $ rshlogfile      : NULL
[10:57:01.454] |   $ rshopts         : chr(0) 
[10:57:01.454] |   $ rank            : int 1
[10:57:01.454] |   $ manual          : logi FALSE
[10:57:01.454] |   $ dryrun          : logi FALSE
[10:57:01.454] |   $ quiet           : logi FALSE
[10:57:01.454] |   $ setup_strategy  : chr "parallel"
[10:57:01.454] |   $ local_cmd       : chr "'/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppr"| __truncated__
[10:57:01.454] |   $ pidfile         : chr "/tmp/RtmpWzyOa0/worker.rank=1.parallelly.parent=105158.19ac6387adbfb.pid"
[10:57:01.454] |   $ rshcmd_label    : NULL
[10:57:01.454] |   $ rsh_call        : NULL
[10:57:01.454] |   $ cmd             : chr "'/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppr"| __truncated__
[10:57:01.454] |   $ localMachine    : logi TRUE
[10:57:01.454] |   $ make_fcn        :function (worker = getOption2("parallelly.localhost.hostname", "localhost"), 
[10:57:01.454] |      master = NULL, port, connectTimeout = getOption2("parallelly.makeNodePSOCK.connectTimeout", 
[10:57:01.454] |          2 * 60), timeout = getOption2("parallelly.makeNodePSOCK.timeout", 
[10:57:01.454] |          30 * 24 * 60 * 60), rscript = NULL, homogeneous = NULL, rscript_args = NULL, 
[10:57:01.454] |      rscript_envs = NULL, rscript_libs = NULL, rscript_startup = NULL, rscript_sh = c("auto", 
[10:57:01.454] |          "cmd", "sh", "none"), default_packages = c("datasets", "utils", 
[10:57:01.454] |          "grDevices", "graphics", "stats", if (methods) "methods"), methods = TRUE, 
[10:57:01.454] |      socketOptions = getOption2("parallelly.makeNodePSOCK.socketOptions", 
[10:57:01.454] |          "no-delay"), useXDR = getOption2("parallelly.makeNodePSOCK.useXDR", 
[10:57:01.454] |          FALSE), outfile = "/dev/null", renice = NA_integer_, rshcmd = getOption2("parallelly.makeNodePSOCK.rshcmd", 
[10:57:01.454] |          NULL), user = NULL, revtunnel = NA, rshlogfile = NULL, rshopts = getOption2("parallelly.makeNodePSOCK.rshopts", 
[10:57:01.454] |          NULL), rank = 1L, manual = FALSE, dryrun = FALSE, quiet = FALSE, 
[10:57:01.454] |      setup_strategy = getOption2("parallelly.makeNodePSOCK.setup_strategy", 
[10:57:01.454] |          "parallel"), action = c("launch", "options"), verbose = FALSE)  
[10:57:01.454] |   $ arguments       :List of 28
[10:57:01.454] |    ..$ worker          : chr "localhost"
[10:57:01.454] |    ..$ master          : NULL
[10:57:01.454] |    ..$ port            : int 11683
[10:57:01.454] |    ..$ connectTimeout  : num 120
[10:57:01.454] |    ..$ timeout         : num 2592000
[10:57:01.454] |    ..$ rscript         : NULL
[10:57:01.454] |    ..$ homogeneous     : NULL
[10:57:01.454] |    ..$ rscript_args    : NULL
[10:57:01.454] |    ..$ rscript_envs    : NULL
[10:57:01.454] |    ..$ rscript_libs    : NULL
[10:57:01.454] |    ..$ rscript_startup : NULL
[10:57:01.454] |    ..$ rscript_sh      : chr "auto"
[10:57:01.454] |    ..$ default_packages: chr [1:6] "datasets" "utils" "grDevices" "graphics" ...
[10:57:01.454] |    ..$ methods         : logi TRUE
[10:57:01.454] |    ..$ socketOptions   : chr "no-delay"
[10:57:01.454] |    ..$ useXDR          : logi FALSE
[10:57:01.454] |    ..$ outfile         : chr "/dev/null"
[10:57:01.454] |    ..$ renice          : int NA
[10:57:01.454] |    ..$ rshcmd          : NULL
[10:57:01.454] |    ..$ user            : NULL
[10:57:01.454] |    ..$ revtunnel       : logi NA
[10:57:01.454] |    ..$ rshlogfile      : NULL
[10:57:01.454] |    ..$ rshopts         : NULL
[10:57:01.454] |    ..$ rank            : int 1
[10:57:01.454] |    ..$ manual          : logi FALSE
[10:57:01.454] |    ..$ dryrun          : logi FALSE
[10:57:01.454] |    ..$ quiet           : logi FALSE
[10:57:01.454] |    ..$ setup_strategy  : chr "parallel"
[10:57:01.454] |   - attr(*, "class")= chr [1:2] "makeNodePSOCKOptions" "makeNodeOptions"
[10:57:01.472] |  [local output] System call to launch all workers:
[10:57:01.472] |  [local output] '/usr/local/lib/R/bin/Rscript' --default-packages=datasets,utils,grDevices,graphics,stats,methods -e 'try(suppressWarnings(cat(Sys.getpid(),file="/tmp/RtmpWzyOa0/worker.rank=1.parallelly.parent=105158.19ac6387adbfb.pid")),silent=TRUE)' -e 'options(socketOptions="no-delay")' -e 'workRSOCK<-tryCatch(parallel:::.workRSOCK,error=function(e)parallel:::.slaveRSOCK);workRSOCK()' MASTER=localhost PORT=11683 OUT=/dev/null TIMEOUT=2592000 XDR=FALSE SETUPTIMEOUT=120 SETUPSTRATEGY=parallel
[10:57:01.472] |  [local output] Starting PSOCK main server
[10:57:01.473] |  [local output] Workers launched
[10:57:01.473] |  [local output] Waiting for workers to connect back ...
[10:57:01.473] |  :  [local output] 0 workers out of 1 ready
[10:57:01.655] |  :  [local output] 0 workers out of 1 ready
[10:57:01.655] |  :  [local output] 1 workers out of 1 ready
[10:57:01.655] |  [local output] Waiting for workers to connect back ... done
[10:57:01.656] |  [local output] Launching of 1 workers completed
[10:57:01.656] |  [local output] Number of nodes in cluster: 1
[10:57:01.656] |  [local output] Collecting session information from 1 workers
[10:57:01.656] |  :  [local output] Worker #1 of 1
[10:57:01.657] |  [local output] Collecting session information from 1 workers
[10:57:01.657] [local output] makeClusterPSOCK() ... done
Socket cluster with 1 nodes where 1 node is on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
Socket cluster with 2 nodes where 2 nodes are on host ‘localhost’ (R version 4.4.3 (2025-02-28), platform x86_64-pc-linux-gnu)
*** cluster operations - c(...) ... DONE

> message("*** cluster operations - makeClusterPSOCK(remotes) ...")
*** cluster operations - makeClusterPSOCK(remotes) ...

> remotes <- Sys.getenv("R_PARALLELLY_TESTS_REMOTES", 
+     "")

> remotes <- gsub(" ", "", unlist(strsplit(remotes, 
+     split = ",")))

> remotes <- remotes[nzchar(remotes)]

> if (length(remotes) > 0) {
+     message("Remotes: ", paste(sQuote(remotes), collapse = ", "))
+     local({
+         cl <- makeClusterPSOCK(remote .... [TRUNCATED] 

> message("*** cluster operations - makeClusterPSOCK(remotes) ... DONE")
*** cluster operations - makeClusterPSOCK(remotes) ... DONE

> message("*** cluster operations ... DONE")
*** cluster operations ... DONE
Sourcing 4 epilogue scripts ...
01/04 epilogue script ‘/usr/local/lib/R/site-library/parallelly/testme/_epilogue/002.undo-state.R’
02/04 epilogue script ‘/usr/local/lib/R/site-library/parallelly/testme/_epilogue/090.gc.R’
03/04 epilogue script ‘/usr/local/lib/R/site-library/parallelly/testme/_epilogue/099.session_info.R’
04/04 epilogue script ‘/usr/local/lib/R/site-library/parallelly/testme/_epilogue/999.detritus.R’
Looking for detritus files generated by test ‘as.cluster’:
Skipping, because path appears not to be an 'R CMD check' folder: ‘/tmp’
Sourcing 4 epilogue scripts ... done
Test time: user.self=0.1s, sys.self=0.01s, elapsed=0.7s, user.child=0.2s, sys.child=0.3s
Test ‘as.cluster’ ... success
> 

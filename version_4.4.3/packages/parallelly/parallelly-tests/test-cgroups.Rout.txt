
R version 4.4.3 (2025-02-28) -- "Trophy Case"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> ## This runs testme test script incl/testme/test-cgroups.R
> ## Don't edit - it was autogenerated by inst/testme/deploy.R
> parallelly:::testme("cgroups")
Test ‘cgroups’ ...
Sourcing 7 prologue scripts ...
01/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/001.load.R’
02/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/002.record-state.R’
03/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/030.imports.R’
04/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/050.utils.R’
05/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/090.context.R’
06/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/090.options.R’
07/07 prologue script ‘/usr/local/lib/R/site-library/parallelly/testme/_prologue/091.envvars.R’
Sourcing 7 prologue scripts ... done
Running test script: ‘/usr/local/lib/R/site-library/parallelly/testme/test-cgroups.R’

> library(parallelly)

> message("*** cgroups ...")
*** cgroups ...

> message("- getCGroups()")
- getCGroups()

> cgroups <- parallelly:::getCGroups()

> print(cgroups)
  hierarchy_id controller path
1            0               /

> stopifnot(is.data.frame(cgroups), identical(colnames(cgroups), 
+     c("hierarchy_id", "controller", "path")), nrow(cgroups) == 
+     0 || !is.nul .... [TRUNCATED] 

> message("- getCGroupsRoot()")
- getCGroupsRoot()

> root <- parallelly:::getCGroupsRoot()

> cat(sprintf("cgroups root path: %s\n", sQuote(root)))
cgroups root path: ‘/sys/fs/cgroup’

> stopifnot(length(root) == 1, is.character(root))

> message("- getCGroups()")
- getCGroups()

> cgroups <- parallelly:::getCGroups()

> print(cgroups)
  hierarchy_id controller path
1            0               /

> stopifnot(is.data.frame(cgroups))

> message("- getCGroupsPath()")
- getCGroupsPath()

> path <- parallelly:::getCGroupsPath("cpu")

> cat(sprintf("cgroups 'cpu' path: %s\n", sQuote(path)))
cgroups 'cpu' path: ‘NA’

> stopifnot(length(path) == 1, is.character(path))

> path <- parallelly:::getCGroupsPath("cpuset")

> cat(sprintf("cgroups 'cpuset' path: %s\n", sQuote(path)))
cgroups 'cpuset' path: ‘NA’

> stopifnot(length(path) == 1, is.character(path))

> message("- getCGroups1Value()")
- getCGroups1Value()

> value <- parallelly:::getCGroups1Value("cpu", "cpu.cfs_quota_us")

> cat(sprintf("cgroups v1 'cpu.cfs_quota_us' value: %s\n", 
+     sQuote(value)))
cgroups v1 'cpu.cfs_quota_us' value: ‘NA’

> stopifnot(length(value) == 1, is.character(value))

> value <- parallelly:::getCGroups1Value("cpu", "cpu.cfs_total_us")

> cat(sprintf("cgroups v1 'cpu.cfs_total_us' value: %s\n", 
+     sQuote(value)))
cgroups v1 'cpu.cfs_total_us' value: ‘NA’

> stopifnot(length(value) == 1, is.character(value))

> value <- parallelly:::getCGroups1Value("cpuset", "cpuset.cpus")

> cat(sprintf("cgroups v1 'cpuset.cpus' value: %s\n", 
+     sQuote(value)))
cgroups v1 'cpuset.cpus' value: ‘NA’

> stopifnot(length(value) == 1, is.character(value))

> message("- getCGroups1CpuSet()")
- getCGroups1CpuSet()

> value <- parallelly:::getCGroups1CpuSet()

> cat(sprintf("CPU set: [n=%d] %s\n", length(value), 
+     paste(sQuote(value), collapse = ", ")))
CPU set: [n=0] 

> stopifnot(length(value) >= 0, is.integer(value), !any(is.na(value)))

> message("- getCGroups1CpuQuotaMicroseconds()")
- getCGroups1CpuQuotaMicroseconds()

> value <- parallelly:::getCGroups1CpuQuotaMicroseconds()

> cat(sprintf("CPU quota (ms): %d\n", value))
CPU quota (ms): NA

> stopifnot(length(value) == 1, is.integer(value), is.na(value) || 
+     value == -1 || value > 0)

> message("- getCGroups1CpuPeriodMicroseconds()")
- getCGroups1CpuPeriodMicroseconds()

> value <- parallelly:::getCGroups1CpuPeriodMicroseconds()

> cat(sprintf("CPU total (ms): %d\n", value))
CPU total (ms): NA

> stopifnot(length(value) == 1, is.integer(value), is.na(value) || 
+     value > 0)

> message("- getCGroups1CpuQuota()")
- getCGroups1CpuQuota()

> value <- parallelly:::getCGroups1CpuQuota()

> cat(sprintf("CPU quota (ratio): %g\n", value))
CPU quota (ratio): NA

> stopifnot(length(value) == 1, is.numeric(value), !is.infinite(value), 
+     is.na(value) || value > 0)

> message("- getCGroups2CpuMax()")
- getCGroups2CpuMax()

> value <- parallelly:::getCGroups2CpuMax()

> cat(sprintf("CPU quota (ratio): %g\n", value))
CPU quota (ratio): NA

> stopifnot(length(value) == 1, is.numeric(value), !is.infinite(value), 
+     is.na(value) || value > 0)

> message("*** cgroups ... DONE")
*** cgroups ... DONE

> root <- system.file(package = "parallelly", "test-data", 
+     mustWork = TRUE)

> for (dir in c("no-cgroups", "mixed-cgroups", "cgroups1", 
+     "cgroups2")) {
+     message(sprintf("%s - real-world ...", dir))
+     path <- file .... [TRUNCATED] 
no-cgroups - real-world ...
CGroups for system ‘no-cgroups’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b83584485bc’
 - UID: 1000
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b83584485bc/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: tmpfs /run tmpfs rw,nosuid,nodev,noexec,relatime,size=3256456k,mode=755,inode64 0 0
 - getCGroupsVersion(): -1
 - getCGroupsMounts():
[1] device     mountpoint type       options    dump       pass      
<0 rows> (or 0-length row.names)
 - getCGroups():
[1] hierarchy_id controller   path        
<0 rows> (or 0-length row.names)
 - length(getCGroups1CpuSet()): 0
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): NA
 - availableCores(which = 'all'):
           system /proc/self/status             nproc          mc.cores 
                4                 4                 4                 2 
           system /proc/self/status             nproc          mc.cores 
                4                 4                 4                 2 
CGroups for system ‘no-cgroups’ ... done
no-cgroups - real-world ... done
mixed-cgroups - real-world ...
CGroups for system ‘piavpn-cgroups’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b8344689adf’
 - UID: 1000
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b8344689adf/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup2 /tmp/RtmpVIBqjK/file19b8344689adf/sys/fs/cgroup cgroup2 rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot 0 0
   02: none /tmp/RtmpVIBqjK/file19b8344689adf//opt/piavpn/etc/cgroup/net_cls cgroup rw,relatime,net_cls 0 0
 - getCGroupsVersion(): 1
 - getCGroupsMounts():
   device                                                       mountpoint
1 cgroup2                  /tmp/RtmpVIBqjK/file19b8344689adf/sys/fs/cgroup
2    none /tmp/RtmpVIBqjK/file19b8344689adf//opt/piavpn/etc/cgroup/net_cls
     type                                                         options dump
1 cgroup2 rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot    0
2  cgroup                                             rw,relatime,net_cls    0
  pass
1    0
2    0
 - getCGroups():
  hierarchy_id controller
2            0           
1            1    net_cls
                                                                                                    path
2 /user.slice/user-1000.slice/user@1000.service/app.slice/app-org.kde.konsole-4415.scope/tab(4427).scope
1                                                                                                      /
 - length(getCGroups1CpuSet()): 0
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): NA
 - availableCores(which = 'all'):
           system /proc/self/status             nproc          mc.cores 
                4                 4                 4                 2 
CGroups for system ‘piavpn-cgroups’ ... done
CGroups for system ‘slurm-cgroups’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b832a4cc390’
 - UID: 632771201
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b832a4cc390/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup2 /tmp/RtmpVIBqjK/file19b832a4cc390/sys/fs/cgroup/unified cgroup2 rw,nosuid,nodev,noexec,relatime,nsdelegate 0 0
   02: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/systemd cgroup rw,nosuid,nodev,noexec,relatime,xattr,name=systemd 0 0
   03: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/memory cgroup rw,nosuid,nodev,noexec,relatime,memory 0 0
   04: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390/sys/fs/cgroup/cpu,cpuacct cgroup rw,nosuid,nodev,noexec,relatime,cpu,cpuacct 0 0
   05: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/perf_event cgroup rw,nosuid,nodev,noexec,relatime,perf_event 0 0
   06: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/hugetlb cgroup rw,nosuid,nodev,noexec,relatime,hugetlb 0 0
   07: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390/sys/fs/cgroup/cpuset cgroup rw,nosuid,nodev,noexec,relatime,cpuset 0 0
   08: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/rdma cgroup rw,nosuid,nodev,noexec,relatime,rdma 0 0
   09: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/misc cgroup rw,nosuid,nodev,noexec,relatime,misc 0 0
   10: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/net_cls,net_prio cgroup rw,nosuid,nodev,noexec,relatime,net_cls,net_prio 0 0
   11: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/freezer cgroup rw,nosuid,nodev,noexec,relatime,freezer 0 0
   12: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/pids cgroup rw,nosuid,nodev,noexec,relatime,pids 0 0
   13: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/blkio cgroup rw,nosuid,nodev,noexec,relatime,blkio 0 0
   14: cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/devices cgroup rw,nosuid,nodev,noexec,relatime,devices 0 0
 - getCGroupsVersion(): 1
 - getCGroupsMounts():
    device                                                        mountpoint
1  cgroup2           /tmp/RtmpVIBqjK/file19b832a4cc390/sys/fs/cgroup/unified
2   cgroup          /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/systemd
3   cgroup           /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/memory
4   cgroup       /tmp/RtmpVIBqjK/file19b832a4cc390/sys/fs/cgroup/cpu,cpuacct
5   cgroup       /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/perf_event
6   cgroup          /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/hugetlb
7   cgroup            /tmp/RtmpVIBqjK/file19b832a4cc390/sys/fs/cgroup/cpuset
8   cgroup             /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/rdma
9   cgroup             /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/misc
10  cgroup /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/net_cls,net_prio
11  cgroup          /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/freezer
12  cgroup             /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/pids
13  cgroup            /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/blkio
14  cgroup          /tmp/RtmpVIBqjK/file19b832a4cc390//sys/fs/cgroup/devices
      type                                            options dump pass
1  cgroup2         rw,nosuid,nodev,noexec,relatime,nsdelegate    0    0
2   cgroup rw,nosuid,nodev,noexec,relatime,xattr,name=systemd    0    0
3   cgroup             rw,nosuid,nodev,noexec,relatime,memory    0    0
4   cgroup        rw,nosuid,nodev,noexec,relatime,cpu,cpuacct    0    0
5   cgroup         rw,nosuid,nodev,noexec,relatime,perf_event    0    0
6   cgroup            rw,nosuid,nodev,noexec,relatime,hugetlb    0    0
7   cgroup             rw,nosuid,nodev,noexec,relatime,cpuset    0    0
8   cgroup               rw,nosuid,nodev,noexec,relatime,rdma    0    0
9   cgroup               rw,nosuid,nodev,noexec,relatime,misc    0    0
10  cgroup   rw,nosuid,nodev,noexec,relatime,net_cls,net_prio    0    0
11  cgroup            rw,nosuid,nodev,noexec,relatime,freezer    0    0
12  cgroup               rw,nosuid,nodev,noexec,relatime,pids    0    0
13  cgroup              rw,nosuid,nodev,noexec,relatime,blkio    0    0
14  cgroup            rw,nosuid,nodev,noexec,relatime,devices    0    0
 - getCGroups():
    hierarchy_id   controller                                           path
14             0                                /system.slice/slurmd.service
13             1 name=systemd                   /system.slice/slurmd.service
12             2       memory               /slurm/uid_632771201/job_1140459
11             3          cpu               /slurm/uid_632771201/job_1140459
111            3      cpuacct               /slurm/uid_632771201/job_1140459
10             4   perf_event                                              /
9              5      hugetlb                                              /
8              6       cpuset        /slurm/uid_632771201/job_1140459/step_0
7              7         rdma                                              /
6              8         misc                                              /
5              9      net_cls                                              /
51             9     net_prio                                              /
4             10      freezer        /slurm/uid_632771201/job_1140459/step_0
3             11         pids                   /system.slice/slurmd.service
2             12        blkio               /slurm/uid_632771201/job_1140459
1             13      devices /slurm/uid_632771201/job_1140459/step_0/task_0
 - length(getCGroups1CpuSet()): 1
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): NA
 - availableCores(which = 'all'):
           system /proc/self/status    cgroups.cpuset             nproc 
                4                 4                 1                 4 
         mc.cores 
                2 
CGroups for system ‘slurm-cgroups’ ... done
mixed-cgroups - real-world ... done
cgroups1 - real-world ...
CGroups for system ‘c4-dev3’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b832643cde4’
 - UID: 581
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b832643cde4/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/systemd cgroup rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd 0 0
   02: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/rdma cgroup rw,nosuid,nodev,noexec,relatime,rdma 0 0
   03: cgroup /tmp/RtmpVIBqjK/file19b832643cde4/sys/fs/cgroup/cpu,cpuacct cgroup rw,nosuid,nodev,noexec,relatime,cpu,cpuacct 0 0
   04: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/freezer cgroup rw,nosuid,nodev,noexec,relatime,freezer 0 0
   05: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/devices cgroup rw,nosuid,nodev,noexec,relatime,devices 0 0
   06: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/net_cls,net_prio cgroup rw,nosuid,nodev,noexec,relatime,net_cls,net_prio 0 0
   07: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/memory cgroup rw,nosuid,nodev,noexec,relatime,memory 0 0
   08: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/pids cgroup rw,nosuid,nodev,noexec,relatime,pids 0 0
   09: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/hugetlb cgroup rw,nosuid,nodev,noexec,relatime,hugetlb 0 0
   10: cgroup /tmp/RtmpVIBqjK/file19b832643cde4/sys/fs/cgroup/cpuset cgroup rw,nosuid,nodev,noexec,relatime,cpuset 0 0
   11: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/perf_event cgroup rw,nosuid,nodev,noexec,relatime,perf_event 0 0
   12: cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/blkio cgroup rw,nosuid,nodev,noexec,relatime,blkio 0 0
 - getCGroupsVersion(): 1
 - getCGroupsMounts():
   device                                                        mountpoint
1  cgroup          /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/systemd
2  cgroup             /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/rdma
3  cgroup       /tmp/RtmpVIBqjK/file19b832643cde4/sys/fs/cgroup/cpu,cpuacct
4  cgroup          /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/freezer
5  cgroup          /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/devices
6  cgroup /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/net_cls,net_prio
7  cgroup           /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/memory
8  cgroup             /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/pids
9  cgroup          /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/hugetlb
10 cgroup            /tmp/RtmpVIBqjK/file19b832643cde4/sys/fs/cgroup/cpuset
11 cgroup       /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/perf_event
12 cgroup            /tmp/RtmpVIBqjK/file19b832643cde4//sys/fs/cgroup/blkio
     type
1  cgroup
2  cgroup
3  cgroup
4  cgroup
5  cgroup
6  cgroup
7  cgroup
8  cgroup
9  cgroup
10 cgroup
11 cgroup
12 cgroup
                                                                                                   options
1  rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd
2                                                                     rw,nosuid,nodev,noexec,relatime,rdma
3                                                              rw,nosuid,nodev,noexec,relatime,cpu,cpuacct
4                                                                  rw,nosuid,nodev,noexec,relatime,freezer
5                                                                  rw,nosuid,nodev,noexec,relatime,devices
6                                                         rw,nosuid,nodev,noexec,relatime,net_cls,net_prio
7                                                                   rw,nosuid,nodev,noexec,relatime,memory
8                                                                     rw,nosuid,nodev,noexec,relatime,pids
9                                                                  rw,nosuid,nodev,noexec,relatime,hugetlb
10                                                                  rw,nosuid,nodev,noexec,relatime,cpuset
11                                                              rw,nosuid,nodev,noexec,relatime,perf_event
12                                                                   rw,nosuid,nodev,noexec,relatime,blkio
   dump pass
1     0    0
2     0    0
3     0    0
4     0    0
5     0    0
6     0    0
7     0    0
8     0    0
9     0    0
10    0    0
11    0    0
12    0    0
 - getCGroups():
    hierarchy_id   controller                                          path
12             1 name=systemd /user.slice/user-581.slice/session-9171.scope
11             2         rdma                                             /
10             3          cpu                                             /
101            3      cpuacct                                             /
9              4      freezer                                             /
8              5      devices                                   /user.slice
7              6      net_cls                                             /
71             6     net_prio                                             /
6              7       memory /user.slice/user-581.slice/session-9171.scope
5              8         pids /user.slice/user-581.slice/session-9171.scope
4              9      hugetlb                                             /
3             10       cpuset                                             /
2             11   perf_event                                             /
1             12        blkio                    /system.slice/sshd.service
 - length(getCGroups1CpuSet()): 40
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): NA
 - availableCores(which = 'all'):
           system /proc/self/status    cgroups.cpuset             nproc 
                4                 4                40                 4 
         mc.cores 
                2 
           system /proc/self/status    cgroups.cpuset             nproc 
                4                 4                40                 4 
         mc.cores 
                2 
CGroups for system ‘c4-dev3’ ... done
CGroups for system ‘c4-n39-4cores’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b8333419164’
 - UID: 581
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b8333419164/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/systemd cgroup rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd 0 0
   02: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/net_cls,net_prio cgroup rw,nosuid,nodev,noexec,relatime,net_cls,net_prio 0 0
   03: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/hugetlb cgroup rw,nosuid,nodev,noexec,relatime,hugetlb 0 0
   04: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/blkio cgroup rw,nosuid,nodev,noexec,relatime,blkio 0 0
   05: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/freezer cgroup rw,nosuid,nodev,noexec,relatime,freezer 0 0
   06: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/pids cgroup rw,nosuid,nodev,noexec,relatime,pids 0 0
   07: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/memory cgroup rw,nosuid,nodev,noexec,relatime,memory 0 0
   08: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/perf_event cgroup rw,nosuid,nodev,noexec,relatime,perf_event 0 0
   09: cgroup /tmp/RtmpVIBqjK/file19b8333419164/sys/fs/cgroup/cpu,cpuacct cgroup rw,nosuid,nodev,noexec,relatime,cpu,cpuacct 0 0
   10: cgroup /tmp/RtmpVIBqjK/file19b8333419164/sys/fs/cgroup/cpuset cgroup rw,nosuid,nodev,noexec,relatime,cpuset 0 0
   11: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/devices cgroup rw,nosuid,nodev,noexec,relatime,devices 0 0
   12: cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/rdma cgroup rw,nosuid,nodev,noexec,relatime,rdma 0 0
 - getCGroupsVersion(): 1
 - getCGroupsMounts():
   device                                                        mountpoint
1  cgroup          /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/systemd
2  cgroup /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/net_cls,net_prio
3  cgroup          /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/hugetlb
4  cgroup            /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/blkio
5  cgroup          /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/freezer
6  cgroup             /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/pids
7  cgroup           /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/memory
8  cgroup       /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/perf_event
9  cgroup       /tmp/RtmpVIBqjK/file19b8333419164/sys/fs/cgroup/cpu,cpuacct
10 cgroup            /tmp/RtmpVIBqjK/file19b8333419164/sys/fs/cgroup/cpuset
11 cgroup          /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/devices
12 cgroup             /tmp/RtmpVIBqjK/file19b8333419164//sys/fs/cgroup/rdma
     type
1  cgroup
2  cgroup
3  cgroup
4  cgroup
5  cgroup
6  cgroup
7  cgroup
8  cgroup
9  cgroup
10 cgroup
11 cgroup
12 cgroup
                                                                                                   options
1  rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd
2                                                         rw,nosuid,nodev,noexec,relatime,net_cls,net_prio
3                                                                  rw,nosuid,nodev,noexec,relatime,hugetlb
4                                                                    rw,nosuid,nodev,noexec,relatime,blkio
5                                                                  rw,nosuid,nodev,noexec,relatime,freezer
6                                                                     rw,nosuid,nodev,noexec,relatime,pids
7                                                                   rw,nosuid,nodev,noexec,relatime,memory
8                                                               rw,nosuid,nodev,noexec,relatime,perf_event
9                                                              rw,nosuid,nodev,noexec,relatime,cpu,cpuacct
10                                                                  rw,nosuid,nodev,noexec,relatime,cpuset
11                                                                 rw,nosuid,nodev,noexec,relatime,devices
12                                                                    rw,nosuid,nodev,noexec,relatime,rdma
   dump pass
1     0    0
2     0    0
3     0    0
4     0    0
5     0    0
6     0    0
7     0    0
8     0    0
9     0    0
10    0    0
11    0    0
12    0    0
 - getCGroups():
    hierarchy_id   controller                                    path
12             1 name=systemd            /system.slice/slurmd.service
11             2      net_cls                                       /
111            2     net_prio                                       /
10             3      hugetlb                                       /
9              4        blkio            /system.slice/slurmd.service
8              5      freezer        /slurm/uid_581/job_255208/step_0
7              6         pids            /system.slice/slurmd.service
6              7       memory        /slurm/uid_581/job_255208/step_0
5              8   perf_event                                       /
4              9          cpu            /system.slice/slurmd.service
41             9      cpuacct            /system.slice/slurmd.service
3             10       cpuset        /slurm/uid_581/job_255208/step_0
2             11      devices /slurm/uid_581/job_255208/step_0/task_0
1             12         rdma                                       /
 - length(getCGroups1CpuSet()): 4
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): NA
 - availableCores(which = 'all'):
           system /proc/self/status    cgroups.cpuset             nproc 
                4                 4                 4                 4 
         mc.cores 
                2 
CGroups for system ‘c4-n39-4cores’ ... done
CGroups for system ‘posit-workbench’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b83501a8244’
 - UID: 6776184
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b83501a8244/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/systemd cgroup ro,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd 0 0
   02: cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/hugetlb cgroup ro,nosuid,nodev,noexec,relatime,hugetlb 0 0
   03: cgroup /tmp/RtmpVIBqjK/file19b83501a8244/sys/fs/cgroup/cpu,cpuacct cgroup ro,nosuid,nodev,noexec,relatime,cpu,cpuacct 0 0
   04: cgroup /tmp/RtmpVIBqjK/file19b83501a8244/sys/fs/cgroup/cpuset cgroup ro,nosuid,nodev,noexec,relatime,cpuset 0 0
   05: cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/perf_event cgroup ro,nosuid,nodev,noexec,relatime,perf_event 0 0
   06: cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/net_cls,net_prio cgroup ro,nosuid,nodev,noexec,relatime,net_cls,net_prio 0 0
   07: cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/memory cgroup ro,nosuid,nodev,noexec,relatime,memory 0 0
   08: cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/blkio cgroup ro,nosuid,nodev,noexec,relatime,blkio 0 0
   09: cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/freezer cgroup ro,nosuid,nodev,noexec,relatime,freezer 0 0
   10: cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/devices cgroup ro,nosuid,nodev,noexec,relatime,devices 0 0
   11: cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/pids cgroup ro,nosuid,nodev,noexec,relatime,pids 0 0
 - getCGroupsVersion(): 1
 - getCGroupsMounts():
   device                                                        mountpoint
1  cgroup          /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/systemd
2  cgroup          /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/hugetlb
3  cgroup       /tmp/RtmpVIBqjK/file19b83501a8244/sys/fs/cgroup/cpu,cpuacct
4  cgroup            /tmp/RtmpVIBqjK/file19b83501a8244/sys/fs/cgroup/cpuset
5  cgroup       /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/perf_event
6  cgroup /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/net_cls,net_prio
7  cgroup           /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/memory
8  cgroup            /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/blkio
9  cgroup          /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/freezer
10 cgroup          /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/devices
11 cgroup             /tmp/RtmpVIBqjK/file19b83501a8244//sys/fs/cgroup/pids
     type
1  cgroup
2  cgroup
3  cgroup
4  cgroup
5  cgroup
6  cgroup
7  cgroup
8  cgroup
9  cgroup
10 cgroup
11 cgroup
                                                                                                   options
1  ro,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd
2                                                                  ro,nosuid,nodev,noexec,relatime,hugetlb
3                                                              ro,nosuid,nodev,noexec,relatime,cpu,cpuacct
4                                                                   ro,nosuid,nodev,noexec,relatime,cpuset
5                                                               ro,nosuid,nodev,noexec,relatime,perf_event
6                                                         ro,nosuid,nodev,noexec,relatime,net_cls,net_prio
7                                                                   ro,nosuid,nodev,noexec,relatime,memory
8                                                                    ro,nosuid,nodev,noexec,relatime,blkio
9                                                                  ro,nosuid,nodev,noexec,relatime,freezer
10                                                                 ro,nosuid,nodev,noexec,relatime,devices
11                                                                    ro,nosuid,nodev,noexec,relatime,pids
   dump pass
1     0    0
2     0    0
3     0    0
4     0    0
5     0    0
6     0    0
7     0    0
8     0    0
9     0    0
10    0    0
11    0    0
 - getCGroups():
   hierarchy_id   controller
11            1 name=systemd
10            2      hugetlb
9             3          cpu
91            3      cpuacct
8             4       cpuset
7             5   perf_event
6             6      net_cls
61            6     net_prio
5             7       memory
4             8        blkio
3             9      freezer
2            10      devices
1            11         pids
                                                                                                                                                           path
11 /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
10 /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
9  /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
91 /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
8  /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
7  /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
6  /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
61 /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
5  /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
4  /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
3  /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
2  /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
1  /kubepods.slice/kubepods-pod0f2ea08d_d925_452c_b489_a089fbd80d96.slice/cri-containerd-f7f17ada6ed1935b2590745f64ccd612de2ef85078ac37bc962a9669e1280c66.scope
 - length(getCGroups1CpuSet()): 32
 - getCGroups1CpuQuota(): 2
 - getCGroups2CpuMax(): NA
 - availableCores(which = 'all'):
           system /proc/self/status    cgroups.cpuset  cgroups.cpuquota 
                4                 4                32                 2 
            nproc          mc.cores 
                4                 2 
           system /proc/self/status    cgroups.cpuset  cgroups.cpuquota 
                4                 4                32                 2 
            nproc          mc.cores 
                4                 2 
CGroups for system ‘posit-workbench’ ... done
cgroups1 - real-world ... done
cgroups2 - real-world ...
CGroups for system ‘dev1’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b8330871b8c’
 - UID: 34002
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b8330871b8c/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup2 /tmp/RtmpVIBqjK/file19b8330871b8c/sys/fs/cgroup cgroup2 rw,seclabel,nosuid,nodev,noexec,relatime,nsdelegate 0 0
 - getCGroupsVersion(): 2
 - getCGroupsMounts():
   device                                      mountpoint    type
1 cgroup2 /tmp/RtmpVIBqjK/file19b8330871b8c/sys/fs/cgroup cgroup2
                                              options dump pass
1 rw,seclabel,nosuid,nodev,noexec,relatime,nsdelegate    0    0
 - getCGroups():
  hierarchy_id controller                                              path
1            0            /user.slice/user-34002.slice/session-139474.scope
 - length(getCGroups1CpuSet()): 0
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): NA
 - availableCores(which = 'all'):
           system /proc/self/status             nproc          mc.cores 
                4                 4                 4                 2 
           system /proc/self/status             nproc          mc.cores 
                4                 4                 4                 2 
CGroups for system ‘dev1’ ... done
CGroups for system ‘dt1’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b837a63a5a9’
 - UID: 34002
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b837a63a5a9/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup2 /tmp/RtmpVIBqjK/file19b837a63a5a9/sys/fs/cgroup cgroup2 rw,seclabel,nosuid,nodev,noexec,relatime,nsdelegate 0 0
 - getCGroupsVersion(): 2
 - getCGroupsMounts():
   device                                      mountpoint    type
1 cgroup2 /tmp/RtmpVIBqjK/file19b837a63a5a9/sys/fs/cgroup cgroup2
                                              options dump pass
1 rw,seclabel,nosuid,nodev,noexec,relatime,nsdelegate    0    0
 - getCGroups():
  hierarchy_id controller                         path
1            0            /user.slice/user-34002.slice
 - length(getCGroups1CpuSet()): 0
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): 2
 - availableCores(which = 'all'):
           system /proc/self/status  cgroups2.cpu.max             nproc 
                4                 4                 2                 4 
         mc.cores 
                2 
           system /proc/self/status  cgroups2.cpu.max             nproc 
                4                 4                 2                 4 
         mc.cores 
                2 
CGroups for system ‘dt1’ ... done
CGroups for system ‘log1’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b836862995e’
 - UID: 34002
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b836862995e/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup2 /tmp/RtmpVIBqjK/file19b836862995e/sys/fs/cgroup cgroup2 rw,seclabel,nosuid,nodev,noexec,relatime,nsdelegate 0 0
 - getCGroupsVersion(): 2
 - getCGroupsMounts():
   device                                      mountpoint    type
1 cgroup2 /tmp/RtmpVIBqjK/file19b836862995e/sys/fs/cgroup cgroup2
                                              options dump pass
1 rw,seclabel,nosuid,nodev,noexec,relatime,nsdelegate    0    0
 - getCGroups():
  hierarchy_id controller                         path
1            0            /user.slice/user-34002.slice
 - length(getCGroups1CpuSet()): 0
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): 1
 - availableCores(which = 'all'):
           system /proc/self/status  cgroups2.cpu.max             nproc 
                4                 4                 1                 4 
         mc.cores 
                2 
           system /proc/self/status  cgroups2.cpu.max             nproc 
                4                 4                 1                 4 
         mc.cores 
                2 
CGroups for system ‘log1’ ... done
CGroups for system ‘pi-2021’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b8371cc8de5’
 - UID: 1000
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b8371cc8de5/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup2 /tmp/RtmpVIBqjK/file19b8371cc8de5/sys/fs/cgroup cgroup2 rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot 0 0
 - getCGroupsVersion(): 2
 - getCGroupsMounts():
   device                                      mountpoint    type
1 cgroup2 /tmp/RtmpVIBqjK/file19b8371cc8de5/sys/fs/cgroup cgroup2
                                                          options dump pass
1 rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot    0    0
 - getCGroups():
  hierarchy_id controller                                           path
1            0            /user.slice/user-1000.slice/session-1498.scope
 - length(getCGroups1CpuSet()): 0
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): NA
 - availableCores(which = 'all'):
           system /proc/self/status             nproc          mc.cores 
                4                 4                 4                 2 
           system /proc/self/status             nproc          mc.cores 
                4                 4                 4                 2 
CGroups for system ‘pi-2021’ ... done
CGroups for system ‘posit.cloud-free’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b8348bab89c’
 - UID: 2025988
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b8348bab89c/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup /tmp/RtmpVIBqjK/file19b8348bab89c/sys/fs/cgroup cgroup2 ro,nosuid,nodev,noexec,relatime 0 0
 - getCGroupsVersion(): 2
 - getCGroupsMounts():
  device                                      mountpoint    type
1 cgroup /tmp/RtmpVIBqjK/file19b8348bab89c/sys/fs/cgroup cgroup2
                          options dump pass
1 ro,nosuid,nodev,noexec,relatime    0    0
 - getCGroups():
  hierarchy_id controller path
1            0               /
 - length(getCGroups1CpuSet()): 0
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): 1
 - availableCores(which = 'all'):
           system /proc/self/status  cgroups2.cpu.max             nproc 
                4                 4                 1                 4 
         mc.cores 
                2 
           system /proc/self/status  cgroups2.cpu.max             nproc 
                4                 4                 1                 4 
         mc.cores 
                2 
CGroups for system ‘posit.cloud-free’ ... done
CGroups for system ‘x1’ ...
 - Using temporary folder: ‘/tmp/RtmpVIBqjK/file19b83ba51de4’
 - UID: 1000
 - procPath(): ‘/tmp/RtmpVIBqjK/file19b83ba51de4/proc’
 - maxCores(): Inf
 - Adjust /proc/self/mounts accordingly:
   01: cgroup2 /tmp/RtmpVIBqjK/file19b83ba51de4/sys/fs/cgroup cgroup2 rw,nosuid,nodev,noexec,relatime 0 0
 - getCGroupsVersion(): 2
 - getCGroupsMounts():
   device                                     mountpoint    type
1 cgroup2 /tmp/RtmpVIBqjK/file19b83ba51de4/sys/fs/cgroup cgroup2
                          options dump pass
1 rw,nosuid,nodev,noexec,relatime    0    0
 - getCGroups():
  hierarchy_id controller
1            0           
                                                                                                                                       path
1 /user.slice/user-1000.slice/user@1000.service/app.slice/app-org.gnome.Terminal.slice/vte-spawn-2b165c43-93a4-4257-bef3-0c9d5a3b7f97.scope
 - length(getCGroups1CpuSet()): 0
 - getCGroups1CpuQuota(): NA
 - getCGroups2CpuMax(): NA
 - availableCores(which = 'all'):
           system /proc/self/status             nproc          mc.cores 
                4                 4                 4                 2 
           system /proc/self/status             nproc          mc.cores 
                4                 4                 4                 2 
CGroups for system ‘x1’ ... done
cgroups2 - real-world ... done

> message("cgroups - real-world ... DONE")
cgroups - real-world ... DONE
Test time: user.self=0.2s, sys.self=0.07s, elapsed=0.4s, user.child=0.03s, sys.child=0.1s
Test ‘cgroups’ ... success
> 

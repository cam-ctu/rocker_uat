
R version 4.3.0 (2023-04-21) -- "Already Tomorrow"
Copyright (C) 2023 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> require(optimx)
Loading required package: optimx
> ssqb.f<-function(x){
+   nn<-length(x)
+   yy <- 1:nn
+   f<-sum((yy-x)^2)
+   f
+ }
> ssqb.g <- function(x){
+   nn<-length(x)
+   yy<-1:nn
+   gg<- 2*(x - yy)
+ }
> ssqb.h <- function(x){
+   nn<-length(x)
+   hh<- 2*diag(nn)
+ }
> xx <- rep(pi, 4)
> all4b <- opm(xx, ssqb.f, ssqb.g, hess=ssqb.h, method="ALL")
Small gradient
Warning message:
In optimr(par, fn, gr, hess = hess, method = meth, lower = lower,  :
  Successful convergence  Restarts for stagnation =0
> summary(all4b, order=value)
                   p1       p2       p3       p4        value fevals gevals
L-BFGS-B    1.0000000 2.000000 3.000000 4.000000 0.000000e+00      4      4
nlminb      1.0000000 2.000000 3.000000 4.000000 0.000000e+00      4      3
lbfgsb3c    1.0000000 2.000000 3.000000 4.000000 0.000000e+00      4      4
snewton     1.0000000 2.000000 3.000000 4.000000 0.000000e+00      2      2
snewtonm    1.0000000 2.000000 3.000000 4.000000 0.000000e+00      5      5
spg         1.0000000 2.000000 3.000000 4.000000 0.000000e+00      3      2
lbfgs       1.0000000 2.000000 3.000000 4.000000 0.000000e+00     NA     NA
nlm         1.0000000 2.000000 3.000000 4.000000 1.972152e-31     NA      1
subplex     1.0000000 2.000000 3.000000 4.000000 7.888609e-31    765     NA
ucminf      1.0000000 2.000000 3.000000 4.000000 1.627026e-30      4      4
Rvmmin      1.0000000 2.000000 3.000000 4.000000 1.774937e-30      4      3
Rcgmin      1.0000000 2.000000 3.000000 4.000000 2.761013e-30      4      2
BFGS        1.0000000 2.000000 3.000000 4.000000 3.451266e-30      6      3
Rtnmin      1.0000000 2.000000 3.000000 4.000000 9.171569e-20      2      2
hjn         1.0000000 2.000000 3.000000 4.000000 2.462186e-15    371     NA
bobyqa      0.9999999 2.000000 3.000000 4.000000 2.118904e-14     71     NA
newuoa      1.0000001 2.000000 3.000000 4.000000 7.432020e-14     53     NA
CG          1.0000005 2.000000 3.000000 4.000000 3.229863e-13     15      8
hjkb        0.9999987 1.999999 2.999999 3.999999 6.548641e-12    324     NA
Nelder-Mead 1.0001164 1.999886 3.000012 3.999906 3.548762e-08    157     NA
nmkb        1.0003126 2.000353 3.000301 4.000037 3.144460e-07    130     NA
            convergence kkt1 kkt2 xtime
L-BFGS-B              0 TRUE TRUE 0.000
nlminb                0 TRUE TRUE 0.000
lbfgsb3c              0 TRUE TRUE 0.059
snewton               0 TRUE TRUE 0.001
snewtonm              0 TRUE TRUE 0.001
spg                   0 TRUE TRUE 0.005
lbfgs                 0 TRUE TRUE 0.000
nlm                   0 TRUE TRUE 0.003
subplex               0 TRUE TRUE 0.004
ucminf                0 TRUE TRUE 0.002
Rvmmin                2 TRUE TRUE 0.002
Rcgmin                0 TRUE TRUE 0.000
BFGS                  0 TRUE TRUE 0.018
Rtnmin                0 TRUE TRUE 0.002
hjn                   0 TRUE TRUE 0.002
bobyqa                0 TRUE TRUE 0.001
newuoa                0 TRUE TRUE 0.000
CG                    0 TRUE TRUE 0.001
hjkb                  0 TRUE TRUE 0.002
Nelder-Mead           0 TRUE TRUE 0.001
nmkb                  0 TRUE TRUE 0.008
> 
> all4bx <- optimx(xx, ssqb.f, ssqb.g, control=list(all.methods=TRUE))
> summary(all4bx, order=value)
                   p1       p2       p3       p4        value fevals gevals
L-BFGS-B    1.0000000 2.000000 3.000000 4.000000 0.000000e+00      4      4
nlm         1.0000000 2.000000 3.000000 4.000000 0.000000e+00     NA     NA
nlminb      1.0000000 2.000000 3.000000 4.000000 0.000000e+00      3      2
spg         1.0000000 2.000000 3.000000 4.000000 0.000000e+00      3     NA
ucminf      1.0000000 2.000000 3.000000 4.000000 1.627026e-30      4      4
Rvmmin      1.0000000 2.000000 3.000000 4.000000 1.774937e-30      4      3
Rcgmin      1.0000000 2.000000 3.000000 4.000000 2.761013e-30      4      2
BFGS        1.0000000 2.000000 3.000000 4.000000 3.451266e-30      6      3
bobyqa      1.0000000 2.000000 3.000000 4.000000 1.592630e-15     74     NA
newuoa      1.0000000 2.000000 3.000000 4.000000 1.648088e-15     67     NA
CG          1.0000005 2.000000 3.000000 4.000000 3.229863e-13     15      8
hjkb        0.9999987 1.999999 2.999999 3.999999 6.548641e-12    324     NA
Nelder-Mead 1.0001164 1.999886 3.000012 3.999906 3.548762e-08    157     NA
nmkb        1.0003126 2.000353 3.000301 4.000037 3.144460e-07    130     NA
            niter convcode kkt1 kkt2 xtime
L-BFGS-B       NA        0 TRUE TRUE 0.000
nlm             1        0 TRUE TRUE 0.000
nlminb          2        0 TRUE TRUE 0.000
spg             2        0 TRUE TRUE 0.000
ucminf         NA        0 TRUE TRUE 0.000
Rvmmin         NA        2 TRUE TRUE 0.001
Rcgmin         NA        0 TRUE TRUE 0.001
BFGS           NA        0 TRUE TRUE 0.000
bobyqa         NA        0 TRUE TRUE 0.000
newuoa         NA        0 TRUE TRUE 0.000
CG             NA        0 TRUE TRUE 0.000
hjkb           19        0 TRUE TRUE 0.002
Nelder-Mead    NA        0 TRUE TRUE 0.000
nmkb           NA        0 TRUE TRUE 0.004
> 
> cat("\n\nShow structure differences in solution of opm and optimx\n\n")


Show structure differences in solution of opm and optimx

> str(all4b)
Classes ‘opm’ and 'data.frame':	21 obs. of  11 variables:
 $ p1         : num  1 1 1 1 1 ...
 $ p2         : num  2 2 2 2 2 ...
 $ p3         : num  3 3 3 3 3 ...
 $ p4         : num  4 4 4 4 4 ...
 $ value      : num  3.45e-30 3.23e-13 3.55e-08 0.00 1.97e-31 ...
 $ fevals     : num  6 15 157 4 NA 4 4 4 2 4 ...
 $ gevals     : num  3 8 NA 4 1 3 4 2 2 3 ...
 $ convergence: num  0 0 0 0 0 0 0 0 0 2 ...
 $ kkt1       : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...
 $ kkt2       : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...
 $ xtime      : num  0.018 0.001 0.001 0 0.003 0 0.059 0 0.002 0.002 ...
 - attr(*, "details")=List of 105
  ..$ : chr "BFGS"
  ..$ : chr "CG"
  ..$ : chr "Nelder-Mead"
  ..$ : chr "L-BFGS-B"
  ..$ : chr "nlm"
  ..$ : chr "nlminb"
  ..$ : chr "lbfgsb3c"
  ..$ : chr "Rcgmin"
  ..$ : chr "Rtnmin"
  ..$ : chr "Rvmmin"
  ..$ : chr "snewton"
  ..$ : chr "snewtonm"
  ..$ : chr "spg"
  ..$ : chr "ucminf"
  ..$ : chr "newuoa"
  ..$ : chr "bobyqa"
  ..$ : chr "nmkb"
  ..$ : chr "hjkb"
  ..$ : chr "hjn"
  ..$ : chr "lbfgs"
  ..$ : chr "subplex"
  ..$ : num [1:4] 8.88e-16 -8.88e-16 1.78e-15 1.78e-15
  ..$ : num [1:4] 9.44e-07 5.03e-07 6.24e-08 -3.78e-07
  ..$ : num [1:4] 2.33e-04 -2.28e-04 2.49e-05 -1.88e-04
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] 8.88e-16 0.00 0.00 0.00
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] 2.66e-15 1.78e-15 0.00 -8.88e-16
  ..$ : num [1:4] 5.03e-10 2.68e-10 3.33e-11 -2.02e-10
  ..$ : num [1:4] -8.88e-16 1.78e-15 -1.78e-15 0.00
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] -4.44e-16 1.78e-15 -1.78e-15 0.00
  ..$ : num [1:4] 2.81e-07 9.06e-08 4.58e-07 -1.64e-08
  ..$ : num [1:4] -1.72e-07 1.90e-07 -1.27e-07 -5.48e-08
  ..$ : num [1:4] 6.25e-04 7.06e-04 6.02e-04 7.47e-05
  ..$ : num [1:4] -2.56e-06 -2.56e-06 -2.56e-06 -2.56e-06
  ..$ : num [1:4] -4.96e-08 -4.96e-08 -4.96e-08 -4.96e-08
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] 0.00 0.00 1.78e-15 0.00
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  .. [list output truncated]
  ..- attr(*, "dim")= int [1:2] 21 5
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:21] "BFGS" "CG" "Nelder-Mead" "L-BFGS-B" ...
  .. ..$ : chr [1:5] "method" "ngatend" "nhatend" "hev" ...
 - attr(*, "maximize")= logi FALSE
 - attr(*, "npar")= int 4
> str(all4bx)
Classes ‘optimx’ and 'data.frame':	14 obs. of  12 variables:
 $ p1      : num  1 1 1 1 1 ...
 $ p2      : num  2 2 2 2 2 ...
 $ p3      : num  3 3 3 3 3 ...
 $ p4      : num  4 4 4 4 4 ...
 $ value   : num  3.45e-30 3.23e-13 3.55e-08 0.00 0.00 ...
 $ fevals  : num  6 15 157 4 NA 3 3 4 4 4 ...
 $ gevals  : num  3 8 NA 4 NA 2 NA 4 2 3 ...
 $ niter   : num  NA NA NA NA 1 2 2 NA NA NA ...
 $ convcode: num  0 0 0 0 0 0 0 0 0 2 ...
 $ kkt1    : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...
 $ kkt2    : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...
 $ xtime   : num  0 0 0 0 0 0 0 0 0.001 0.001 ...
 - attr(*, "details")=List of 70
  ..$ : chr "BFGS"
  ..$ : chr "CG"
  ..$ : chr "Nelder-Mead"
  ..$ : chr "L-BFGS-B"
  ..$ : chr "nlm"
  ..$ : chr "nlminb"
  ..$ : chr "spg"
  ..$ : chr "ucminf"
  ..$ : chr "Rcgmin"
  ..$ : chr "Rvmmin"
  ..$ : chr "newuoa"
  ..$ : chr "bobyqa"
  ..$ : chr "nmkb"
  ..$ : chr "hjkb"
  ..$ : num [1:4] 8.88e-16 -8.88e-16 1.78e-15 1.78e-15
  ..$ : num [1:4] 9.44e-07 5.03e-07 6.24e-08 -3.78e-07
  ..$ : num [1:4] 2.33e-04 -2.28e-04 2.49e-05 -1.88e-04
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] 0 0 0 0
  ..$ : num [1:4] -4.44e-16 1.78e-15 -1.78e-15 0.00
  ..$ : num [1:4] 2.66e-15 1.78e-15 0.00 -8.88e-16
  ..$ : num [1:4] -8.88e-16 1.78e-15 -1.78e-15 0.00
  ..$ : num [1:4] 3.76e-08 -5.41e-08 2.26e-08 -4.17e-08
  ..$ : num [1:4] -3.20e-08 4.09e-08 -2.37e-08 5.58e-08
  ..$ : num [1:4] 6.25e-04 7.06e-04 6.02e-04 7.47e-05
  ..$ : num [1:4] -2.56e-06 -2.56e-06 -2.56e-06 -2.56e-06
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4, 1:4] 2 0 0 0 0 ...
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : num [1:4] 2 2 2 2
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..$ : chr "none"
  ..- attr(*, "dim")= int [1:2] 14 5
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:14] "BFGS" "CG" "Nelder-Mead" "L-BFGS-B" ...
  .. ..$ : chr [1:5] "method" "ngatend" "nhatend" "hev" ...
 - attr(*, "maximize")= logi FALSE
 - attr(*, "npar")= int 4
 - attr(*, "follow.on")= logi FALSE
> 


R version 4.3.3 (2024-02-29) -- "Angel Food Cake"
Copyright (C) 2024 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library("listenv")
> 
> dims <- list(3, c(3, 1), c(2, 3), c(2, 3, 4))
> 
> for (dim in dims) {
+   x <- as.list(1:prod(dim))
+   if (length(dim) > 1) {
+     dim(x) <- dim
+     dimnames(x) <- lapply(dim, FUN = function(n) letters[seq_len(n)])
+   }
+   y <- as.listenv(x)
+ 
+   ## NOTE: is.vector() will always be FALSE for list environments, because:
+   ##  "is.vector returns TRUE if x is a vector of the specified mode having
+   ##   no attributes other than names. It returns FALSE otherwise."
+   ## Source: help("is.vector", package = "base")
+   stopifnot(!is.vector(y))
+   stopifnot(is.matrix(x) == is.matrix(y))
+   stopifnot(is.array(x) == is.array(y))
+ 
+   for (mode in c("any", "list", "logical", "integer", "double", "complex",
+                  "character", "raw")) {
+     message("mode: ", mode)
+ 
+     ## as.vector():
+     y <- as.listenv(x)
+     vx <- as.vector(x, mode = mode)
+     print(vx)
+     vy <- as.vector(y, mode = mode)
+     stopifnot(identical(vy, vx))
+     stopifnot(is.matrix(vx) == is.matrix(vy))
+     stopifnot(is.array(vx) == is.array(vy))
+ 
+     ## as.matrix():
+     y <- as.listenv(x)
+     mx <- as.matrix(x)
+     print(mx)
+     my <- as.matrix(y)
+     stopifnot(identical(dim(my), dim(mx)))
+     stopifnot(identical(dimnames(my), dimnames(mx)))
+     stopifnot(is.matrix(mx) == is.matrix(my))
+     stopifnot(is.array(mx) == is.array(my))
+ 
+     ## as.array():
+     y <- as.listenv(x)
+     ax <- as.array(x)
+     print(ax)
+     ay <- as.array(y)
+     stopifnot(identical(dim(ay), dim(ax)))
+     stopifnot(identical(dimnames(ay), dimnames(ax)))
+     stopifnot(is.matrix(ax) == is.matrix(ay))
+     stopifnot(is.array(ax) == is.array(ay))
+   }
+ }
mode: any
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

     [,1]
[1,] 1   
[2,] 2   
[3,] 3   
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

mode: list
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

     [,1]
[1,] 1   
[2,] 2   
[3,] 3   
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

mode: logical
[1] TRUE TRUE TRUE
     [,1]
[1,] 1   
[2,] 2   
[3,] 3   
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

mode: integer
[1] 1 2 3
     [,1]
[1,] 1   
[2,] 2   
[3,] 3   
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

mode: double
[1] 1 2 3
     [,1]
[1,] 1   
[2,] 2   
[3,] 3   
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

mode: complex
[1] 1+0i 2+0i 3+0i
     [,1]
[1,] 1   
[2,] 2   
[3,] 3   
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

mode: character
[1] "1" "2" "3"
     [,1]
[1,] 1   
[2,] 2   
[3,] 3   
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

mode: raw
[1] 01 02 03
     [,1]
[1,] 1   
[2,] 2   
[3,] 3   
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

mode: any
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
mode: list
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
mode: logical
[1] TRUE TRUE TRUE
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
mode: integer
[1] 1 2 3
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
mode: double
[1] 1 2 3
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
mode: complex
[1] 1+0i 2+0i 3+0i
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
mode: character
[1] "1" "2" "3"
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
mode: raw
[1] 01 02 03
  a
a 1
b 2
c 3
  a
a 1
b 2
c 3
mode: any
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
mode: list
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
mode: logical
[1] TRUE TRUE TRUE TRUE TRUE TRUE
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
mode: integer
[1] 1 2 3 4 5 6
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
mode: double
[1] 1 2 3 4 5 6
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
mode: complex
[1] 1+0i 2+0i 3+0i 4+0i 5+0i 6+0i
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
mode: character
[1] "1" "2" "3" "4" "5" "6"
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
mode: raw
[1] 01 02 03 04 05 06
  a b c
a 1 3 5
b 2 4 6
  a b c
a 1 3 5
b 2 4 6
mode: any
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

      [,1]
 [1,] 1   
 [2,] 2   
 [3,] 3   
 [4,] 4   
 [5,] 5   
 [6,] 6   
 [7,] 7   
 [8,] 8   
 [9,] 9   
[10,] 10  
[11,] 11  
[12,] 12  
[13,] 13  
[14,] 14  
[15,] 15  
[16,] 16  
[17,] 17  
[18,] 18  
[19,] 19  
[20,] 20  
[21,] 21  
[22,] 22  
[23,] 23  
[24,] 24  
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

mode: list
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

      [,1]
 [1,] 1   
 [2,] 2   
 [3,] 3   
 [4,] 4   
 [5,] 5   
 [6,] 6   
 [7,] 7   
 [8,] 8   
 [9,] 9   
[10,] 10  
[11,] 11  
[12,] 12  
[13,] 13  
[14,] 14  
[15,] 15  
[16,] 16  
[17,] 17  
[18,] 18  
[19,] 19  
[20,] 20  
[21,] 21  
[22,] 22  
[23,] 23  
[24,] 24  
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

mode: logical
 [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
      [,1]
 [1,] 1   
 [2,] 2   
 [3,] 3   
 [4,] 4   
 [5,] 5   
 [6,] 6   
 [7,] 7   
 [8,] 8   
 [9,] 9   
[10,] 10  
[11,] 11  
[12,] 12  
[13,] 13  
[14,] 14  
[15,] 15  
[16,] 16  
[17,] 17  
[18,] 18  
[19,] 19  
[20,] 20  
[21,] 21  
[22,] 22  
[23,] 23  
[24,] 24  
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

mode: integer
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
      [,1]
 [1,] 1   
 [2,] 2   
 [3,] 3   
 [4,] 4   
 [5,] 5   
 [6,] 6   
 [7,] 7   
 [8,] 8   
 [9,] 9   
[10,] 10  
[11,] 11  
[12,] 12  
[13,] 13  
[14,] 14  
[15,] 15  
[16,] 16  
[17,] 17  
[18,] 18  
[19,] 19  
[20,] 20  
[21,] 21  
[22,] 22  
[23,] 23  
[24,] 24  
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

mode: double
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
      [,1]
 [1,] 1   
 [2,] 2   
 [3,] 3   
 [4,] 4   
 [5,] 5   
 [6,] 6   
 [7,] 7   
 [8,] 8   
 [9,] 9   
[10,] 10  
[11,] 11  
[12,] 12  
[13,] 13  
[14,] 14  
[15,] 15  
[16,] 16  
[17,] 17  
[18,] 18  
[19,] 19  
[20,] 20  
[21,] 21  
[22,] 22  
[23,] 23  
[24,] 24  
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

mode: complex
 [1]  1+0i  2+0i  3+0i  4+0i  5+0i  6+0i  7+0i  8+0i  9+0i 10+0i 11+0i 12+0i
[13] 13+0i 14+0i 15+0i 16+0i 17+0i 18+0i 19+0i 20+0i 21+0i 22+0i 23+0i 24+0i
      [,1]
 [1,] 1   
 [2,] 2   
 [3,] 3   
 [4,] 4   
 [5,] 5   
 [6,] 6   
 [7,] 7   
 [8,] 8   
 [9,] 9   
[10,] 10  
[11,] 11  
[12,] 12  
[13,] 13  
[14,] 14  
[15,] 15  
[16,] 16  
[17,] 17  
[18,] 18  
[19,] 19  
[20,] 20  
[21,] 21  
[22,] 22  
[23,] 23  
[24,] 24  
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

mode: character
 [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" "14" "15"
[16] "16" "17" "18" "19" "20" "21" "22" "23" "24"
      [,1]
 [1,] 1   
 [2,] 2   
 [3,] 3   
 [4,] 4   
 [5,] 5   
 [6,] 6   
 [7,] 7   
 [8,] 8   
 [9,] 9   
[10,] 10  
[11,] 11  
[12,] 12  
[13,] 13  
[14,] 14  
[15,] 15  
[16,] 16  
[17,] 17  
[18,] 18  
[19,] 19  
[20,] 20  
[21,] 21  
[22,] 22  
[23,] 23  
[24,] 24  
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

mode: raw
 [1] 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 10 11 12 13 14 15 16 17 18
      [,1]
 [1,] 1   
 [2,] 2   
 [3,] 3   
 [4,] 4   
 [5,] 5   
 [6,] 6   
 [7,] 7   
 [8,] 8   
 [9,] 9   
[10,] 10  
[11,] 11  
[12,] 12  
[13,] 13  
[14,] 14  
[15,] 15  
[16,] 16  
[17,] 17  
[18,] 18  
[19,] 19  
[20,] 20  
[21,] 21  
[22,] 22  
[23,] 23  
[24,] 24  
, , a

  a b c
a 1 3 5
b 2 4 6

, , b

  a b  c 
a 7 9  11
b 8 10 12

, , c

  a  b  c 
a 13 15 17
b 14 16 18

, , d

  a  b  c 
a 19 21 23
b 20 22 24

> 

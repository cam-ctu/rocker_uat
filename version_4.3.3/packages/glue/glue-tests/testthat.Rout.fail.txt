
R version 4.3.3 (2024-02-29) -- "Angel Food Cake"
Copyright (C) 2024 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(testthat)
> library(glue)
> 
> test_check("glue")
[ FAIL 3 | WARN 0 | SKIP 9 | PASS 261 ]

══ Skipped tests (9) ═══════════════════════════════════════════════════════════
• On CRAN (8): 'test-color.R:46:3', 'test-color.R:77:3', 'test-glue.R:516:3',
  'test-glue.R:542:3', 'test-glue.R:554:3', 'test-glue.R:582:3',
  'test-sql.R:135:3', 'test-transformer.R:2:3'
• On Linux (1): 'test-glue.R:302:3'

══ Failed tests ════════════════════════════════════════════════════════════════
── Failure ('test-sql.R:53:5'): glue_sql: collapses empty values to empty string ──
glue_sql("{var*}", .con = con, var = character()) (`actual`) not identical to DBI::SQL("") (`expected`).

`actual@.Data`:   "NULL"
`expected@.Data`: ""    

`actual`:   "NULL"
`expected`: ""    
── Failure ('test-sql.R:54:5'): glue_sql: collapses empty values to empty string ──
glue_sql("{var*}", .con = con, var = DBI::SQL(character())) (`actual`) not identical to DBI::SQL("") (`expected`).

`actual@.Data`:   "NULL"
`expected@.Data`: ""    

`actual`:   "NULL"
`expected`: ""    
── Error ('test-sql.R:57:5'): glue_sql: mimics glue() when not collapsing ──────
Error in `h(simpleError(msg, call))`: error in evaluating the argument 'conn' in selecting a method for function 'dbQuoteLiteral': argument ".con" is missing, with no default
Backtrace:
     ▆
  1. ├─testthat::expect_equal(...) at test-sql.R:57:5
  2. │ └─testthat::quasi_label(enquo(object), label, arg = "object")
  3. │   └─rlang::eval_bare(expr, quo_get_env(quo))
  4. ├─glue::glue_sql("{var}", var = NULL)
  5. │ ├─DBI::SQL(...)
  6. │ └─glue::glue(...)
  7. │   └─glue::glue_data(...)
  8. ├─glue (local) `<fn>`("var")
  9. │ ├─.transformer(expr, env) %||% .null
 10. │ └─glue (local) .transformer(expr, env)
 11. │   └─DBI::dbQuoteLiteral(connection, res)
 12. └─base::.handleSimpleError(...)
 13.   └─base (local) h(simpleError(msg, call))

[ FAIL 3 | WARN 0 | SKIP 9 | PASS 261 ]
Error: Test failures
Execution halted
